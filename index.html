<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>K.R.O Media - Contract Management</title>
    <style>
        /* ==================== COMPLETE NEON MORPHIC CSS ==================== */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Poppins', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
        }
        
        body {
            background: #0a0a0f;
            color: #ffffff;
            min-height: 100vh;
            padding: 0;
            overflow-x: hidden;
        }
        
        :root {
            --neon-pink: #ff3b9c;
            --neon-purple: #9d4edd;
            --neon-blue: #4d9eff;
            --neon-cyan: #0ef0f0;
            --neon-green: #a4ff7c;
            --dark-bg: #0a0a0f;
            --card-bg: rgba(20, 20, 30, 0.6);
            --glass-border: rgba(255, 255, 255, 0.1);
            --neon-glow: 0 0 10px rgba(157, 78, 221, 0.5);
        }
        
        .glow-pink { text-shadow: 0 0 10px #ff3b9c, 0 0 20px #ff3b9c; }
        .glow-purple { text-shadow: 0 0 10px #9d4edd, 0 0 20px #9d4edd; }
        .glow-blue { text-shadow: 0 0 10px #4d9eff, 0 0 20px #4d9eff; }
        .glow-cyan { text-shadow: 0 0 10px #0ef0f0, 0 0 20px #0ef0f0; }
        
        /* ==================== NEON LOADING SPINNER ==================== */
        .neon-loading {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 8px;
            padding: 20px;
        }
        
        .neon-dot {
            width: 12px;
            height: 12px;
            border-radius: 50%;
            background: #4d9eff;
            box-shadow: 0 0 20px #4d9eff;
            animation: neonPulse 1.5s ease-in-out infinite;
        }
        
        .neon-dot:nth-child(2) {
            animation-delay: 0.2s;
            background: #0ef0f0;
            box-shadow: 0 0 20px #0ef0f0;
        }
        
        .neon-dot:nth-child(3) {
            animation-delay: 0.4s;
            background: #a4ff7c;
            box-shadow: 0 0 20px #a4ff7c;
        }
        
        .neon-dot:nth-child(4) {
            animation-delay: 0.6s;
            background: #ff3b9c;
            box-shadow: 0 0 20px #ff3b9c;
        }
        
        .neon-dot:nth-child(5) {
            animation-delay: 0.8s;
            background: #9d4edd;
            box-shadow: 0 0 20px #9d4edd;
        }
        
        @keyframes neonPulse {
            0%, 100% {
                transform: scale(1);
                opacity: 1;
            }
            50% {
                transform: scale(1.5);
                opacity: 0.8;
                box-shadow: 0 0 30px currentColor;
            }
        }
        
        /* Button Loading State */
        .btn-loading {
            position: relative;
            color: transparent !important;
            pointer-events: none;
        }
        
        .btn-loading::after {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 20px;
            height: 20px;
            border: 2px solid rgba(255,255,255,0.3);
            border-top-color: white;
            border-radius: 50%;
            animation: spin 0.8s linear infinite;
        }
        
        /* Image Loading State */
        .image-loading {
            position: relative;
            background: linear-gradient(90deg, #1a1a1a, #2a2a2a, #1a1a1a);
            background-size: 200% 100%;
            animation: shimmer 1.5s infinite;
            min-height: 200px;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .image-loading .neon-loading {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
        }
        
        /* Card Loading State */
        .card-loading {
            background: linear-gradient(90deg, #1a1a1a, #2a2a2a, #1a1a1a);
            background-size: 200% 100%;
            animation: shimmer 1.5s infinite;
            min-height: 300px;
            border-radius: 25px;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        @keyframes spin {
            to { transform: translate(-50%, -50%) rotate(360deg); }
        }
        
        @keyframes shimmer {
            0% { background-position: -200% 0; }
            100% { background-position: 200% 0; }
        }
        
        /* Toast Notifications */
        .toast-container {
            position: fixed;
            top: 20px;
            right: 20px;
            z-index: 9999;
        }
        
        .toast {
            background: rgba(20, 20, 30, 0.95);
            backdrop-filter: blur(10px);
            border: 1px solid var(--glass-border);
            border-radius: 15px;
            padding: 15px 25px;
            margin-bottom: 10px;
            color: white;
            font-weight: 500;
            box-shadow: 0 0 30px rgba(255, 59, 156, 0.3);
            transform: translateX(120%);
            transition: transform 0.3s ease;
            max-width: 350px;
        }
        
        .toast.show {
            transform: translateX(0);
        }
        
        .toast.success {
            border-left: 4px solid #a4ff7c;
        }
        
        .toast.error {
            border-left: 4px solid #ff3b9c;
        }
        
        .toast.info {
            border-left: 4px solid #4d9eff;
        }
        
        /* Header */
        .header {
            background: rgba(10, 10, 15, 0.8);
            backdrop-filter: blur(10px);
            padding: 15px 30px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            z-index: 100;
            border-bottom: 1px solid var(--glass-border);
        }
        
        .logo {
            font-size: 1.2em;
            font-weight: 800;
            background: linear-gradient(135deg, #ffffff, #e3c0ff);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }
        
        /* Language Selector */
        .language-selector {
            position: relative;
            margin-left: 15px;
        }
        
        .lang-btn {
            background: transparent;
            border: 1px solid var(--glass-border);
            color: white;
            padding: 8px 15px;
            border-radius: 25px;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 5px;
            font-size: 0.9em;
            transition: all 0.3s;
        }
        
        .lang-btn:hover {
            border-color: #ff3b9c;
            background: rgba(255, 59, 156, 0.1);
        }
        
        .lang-dropdown {
            position: absolute;
            top: 100%;
            right: 0;
            margin-top: 10px;
            background: var(--card-bg);
            backdrop-filter: blur(10px);
            border: 1px solid var(--glass-border);
            border-radius: 15px;
            padding: 10px;
            min-width: 150px;
            display: none;
            z-index: 1000;
        }
        
        .lang-dropdown.show {
            display: block;
        }
        
        .lang-option {
            padding: 10px 15px;
            cursor: pointer;
            border-radius: 10px;
            transition: all 0.3s;
            color: white;
        }
        
        .lang-option:hover {
            background: linear-gradient(135deg, #ff3b9c, #9d4edd);
        }
        
        .lang-option.active {
            background: linear-gradient(135deg, #ff3b9c, #9d4edd);
        }
        
        /* Desktop Navigation */
        .nav-buttons { 
            display: flex; 
            gap: 15px; 
            align-items: center;
        }
        
        .nav-btn { 
            padding: 10px 25px; 
            border: none; 
            background: transparent; 
            cursor: pointer; 
            border-radius: 30px; 
            color: #ffffff; 
            font-size: 1em; 
            font-weight: 500; 
            position: relative; 
            overflow: hidden; 
            transition: all 0.3s; 
        }
        
        .nav-btn::before { 
            content: ''; 
            position: absolute; 
            top: 0; 
            left: -100%; 
            width: 100%; 
            height: 100%; 
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.1), transparent); 
            transition: left 0.5s; 
        }
        
        .nav-btn:hover::before { 
            left: 100%; 
        }
        
        .nav-btn.active { 
            background: linear-gradient(135deg, #ff3b9c, #9d4edd); 
            box-shadow: 0 0 20px #ff3b9c; 
        }
        
        .free-pin-btn {
            background: linear-gradient(135deg, #a4ff7c, #4d9eff);
            border: none;
            color: #0a0a0f;
            padding: 10px 20px;
            border-radius: 30px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            box-shadow: 0 0 20px rgba(164, 255, 124, 0.3);
            white-space: nowrap;
        }
        
        .free-pin-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 0 30px rgba(164, 255, 124, 0.6);
        }
        
        /* Mobile Menu Toggle */
        .menu-toggle {
            display: none;
            flex-direction: column;
            justify-content: space-between;
            width: 30px;
            height: 21px;
            cursor: pointer;
            z-index: 101;
        }
        
        .menu-toggle span {
            display: block;
            width: 100%;
            height: 3px;
            background: linear-gradient(135deg, #ff3b9c, #9d4edd);
            border-radius: 3px;
            transition: all 0.3s ease;
        }
        
        .menu-toggle.active span:nth-child(1) {
            transform: translateY(9px) rotate(45deg);
            background: linear-gradient(135deg, #a4ff7c, #4d9eff);
        }
        
        .menu-toggle.active span:nth-child(2) {
            opacity: 0;
        }
        
        .menu-toggle.active span:nth-child(3) {
            transform: translateY(-9px) rotate(-45deg);
            background: linear-gradient(135deg, #a4ff7c, #4d9eff);
        }
        
        /* Mobile Menu */
        .mobile-menu {
            display: none;
            position: fixed;
            top: 70px;
            left: 0;
            right: 0;
            background: rgba(10, 10, 15, 0.95);
            backdrop-filter: blur(10px);
            padding: 20px;
            border-bottom: 1px solid var(--glass-border);
            z-index: 99;
            transform: translateY(-100%);
            transition: transform 0.3s ease;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5);
        }
        
        .mobile-menu.active {
            transform: translateY(0);
        }
        
        .mobile-nav-buttons {
            display: flex;
            flex-direction: column;
            gap: 15px;
            margin-bottom: 20px;
        }
        
        .mobile-nav-btn {
            padding: 15px 25px;
            border: none;
            background: rgba(255, 255, 255, 0.05);
            cursor: pointer;
            border-radius: 15px;
            color: #ffffff;
            font-size: 1.1em;
            font-weight: 500;
            text-align: left;
            border: 1px solid var(--glass-border);
            transition: all 0.3s;
        }
        
        .mobile-nav-btn.active {
            background: linear-gradient(135deg, #ff3b9c, #9d4edd);
            border: none;
            box-shadow: 0 0 20px #ff3b9c;
        }
        
        .mobile-free-pin-btn {
            background: linear-gradient(135deg, #a4ff7c, #4d9eff);
            border: none;
            color: #0a0a0f;
            padding: 15px 25px;
            border-radius: 15px;
            font-weight: 600;
            font-size: 1.1em;
            cursor: pointer;
            width: 100%;
            text-align: left;
            box-shadow: 0 0 20px rgba(164, 255, 124, 0.3);
        }
        
        .mobile-lang-selector {
            margin-top: 15px;
        }
        
        .mobile-lang-options {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
            margin-top: 10px;
        }
        
        .mobile-lang-option {
            flex: 1;
            min-width: 70px;
            padding: 10px;
            background: rgba(255,255,255,0.05);
            border: 1px solid var(--glass-border);
            border-radius: 10px;
            text-align: center;
            cursor: pointer;
        }
        
        .mobile-lang-option.active {
            background: linear-gradient(135deg, #ff3b9c, #9d4edd);
        }
        
        .container { 
            max-width: 1400px; 
            margin: 0 auto; 
            padding: 100px 40px 40px; 
            position: relative; 
        }
        
        /* YouTube Banners */
        .youtube-section { margin: 10px 0 80px 0; }
        .section-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 30px; }
        .section-header h2 { font-size: 2em; background: linear-gradient(135deg, #ff3b9c, #9d4edd); -webkit-background-clip: text; -webkit-text-fill-color: transparent; }
        .see-all { color: #4d9eff; cursor: pointer; font-size: 0.9em; transition: color 0.3s; }
        .see-all:hover { color: #ff3b9c; text-decoration: underline; }
        
        .banners-container {
            position: relative;
            width: 100%;
            overflow: hidden;
            border-radius: 30px;
        }
        
        .banners-slider {
            display: flex;
            transition: transform 0.5s ease;
        }
        
        .banner-slide {
            min-width: 100%;
            padding: 0 10px;
        }
        
        .youtube-banner {
            position: relative;
            border-radius: 30px;
            padding: 80px 60px;
            color: white;
            display: flex;
            align-items: center;
            justify-content: space-between;
            cursor: pointer;
            transition: transform 0.3s;
            box-shadow: 0 0 40px rgba(255, 59, 156, 0.3);
            background-size: cover;
            background-position: center;
            background-repeat: no-repeat;
            min-height: 400px;
        }
        
        .youtube-banner::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(90deg, rgba(0,0,0,0.7) 0%, rgba(0,0,0,0.3) 50%, rgba(0,0,0,0.1) 100%);
            border-radius: 30px;
            z-index: 1;
        }
        
        .youtube-banner:hover {
            transform: scale(1.02);
            box-shadow: 0 0 60px rgba(255, 59, 156, 0.5);
        }
        
        .banner-content {
            position: relative;
            z-index: 2;
            flex: 1;
            max-width: 60%;
        }
        
        .banner-content h3 {
            font-size: 3.5em;
            margin-bottom: 15px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.5);
        }
        
        .banner-content p {
            opacity: 0.95;
            margin-bottom: 30px;
            font-size: 1.3em;
            text-shadow: 1px 1px 2px rgba(0,0,0,0.5);
        }
        
        .banner-stats {
            display: flex;
            gap: 40px;
            margin-bottom: 30px;
        }
        
        .banner-stats .stat {
            background: rgba(0,0,0,0.3);
            backdrop-filter: blur(5px);
            padding: 10px 20px;
            border-radius: 15px;
            border: 1px solid rgba(255,255,255,0.2);
        }
        
        .banner-stats .stat-number {
            font-size: 1.8em;
            font-weight: 700;
            color: white;
            text-shadow: 0 0 10px #ff3b9c;
        }
        
        .banner-stats .stat-label {
            font-size: 0.9em;
            color: rgba(255,255,255,0.8);
        }
        
        .banner-button {
            background: linear-gradient(135deg, #ff3b9c, #9d4edd);
            color: white;
            padding: 15px 50px;
            border-radius: 50px;
            text-decoration: none;
            font-weight: 600;
            display: inline-block;
            transition: transform 0.3s;
            border: none;
            cursor: pointer;
            font-size: 1.2em;
            box-shadow: 0 0 20px rgba(255, 59, 156, 0.5);
        }
        
        .banner-button:hover {
            transform: scale(1.05);
            box-shadow: 0 0 30px rgba(255, 59, 156, 0.8);
        }
        
        .banner-avatar {
            position: relative;
            z-index: 2;
            width: 150px;
            height: 150px;
            border-radius: 50%;
            background: rgba(255,255,255,0.2);
            backdrop-filter: blur(10px);
            display: flex;
            align-items: center;
            justify-content: center;
            margin-left: 30px;
            border: 3px solid rgba(255,255,255,0.3);
            box-shadow: 0 10px 30px rgba(0,0,0,0.3);
            overflow: hidden;
        }
        
        .banner-avatar img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }
        
        .slider-controls {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin-top: 30px;
        }
        
        .slider-dot {
            width: 12px;
            height: 12px;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.2);
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .slider-dot.active {
            background: #ff3b9c;
            box-shadow: 0 0 20px #ff3b9c;
            transform: scale(1.2);
        }
        
        /* Hero Section */
        .hero-section {
            margin-bottom: 60px;
            position: relative;
            display: flex;
            align-items: center;
            justify-content: space-between;
        }
        
        .hero-content {
            flex: 1;
            max-width: 600px;
            position: relative;
            z-index: 5;
        }
        
        .hero-image-container {
            flex: 1;
            position: relative;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 500px;
        }
        
        .hero-floating-image {
            position: relative;
            width: 400px;
            height: 400px;
            border-radius: 30px;
            overflow: hidden;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.4);
            animation: float 6s ease-in-out infinite;
            z-index: 10;
        }
        
        .hero-floating-image img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }
        
        /* Glowing Circles */
        .glow-circle {
            position: absolute;
            border-radius: 50%;
            filter: blur(60px);
            z-index: 1;
        }
        
        .circle-1 {
            width: 400px;
            height: 400px;
            background: rgba(255, 59, 156, 0.3);
            top: 10%;
            left: 10%;
            animation: pulse 8s ease-in-out infinite;
        }
        
        .circle-2 {
            width: 250px;
            height: 250px;
            background: rgba(77, 158, 255, 0.3);
            bottom: 15%;
            right: 15%;
            animation: pulse 6s ease-in-out infinite reverse;
        }
        
        .circle-3 {
            width: 150px;
            height: 150px;
            background: rgba(164, 255, 124, 0.3);
            top: 30%;
            right: 30%;
            animation: pulse 4s ease-in-out infinite;
        }
        
        /* Animations */
        @keyframes float {
            0% { transform: translateY(0px); }
            50% { transform: translateY(-20px); }
            100% { transform: translateY(0px); }
        }
        
        @keyframes pulse {
            0% { transform: scale(1); opacity: 0.3; }
            50% { transform: scale(1.1); opacity: 0.5; }
            100% { transform: scale(1); opacity: 0.3; }
        }
        
        .hero-title {
            font-size: 5em;
            font-weight: 800;
            line-height: 1.1;
            margin-bottom: 20px;
        }
        
        .hero-title .neon {
            background: linear-gradient(135deg, #ff3b9c, #9d4edd);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            display: block;
        }
        
        .hero-title .creators {
            background: linear-gradient(135deg, #4d9eff, #0ef0f0);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            display: block;
        }
        
        .hero-description {
            font-size: 1.2em;
            color: #b0b0b0;
            max-width: 600px;
            margin-bottom: 30px;
            line-height: 1.6;
        }
        
        .hero-buttons { display: flex; gap: 20px; margin-bottom: 40px; }
        .btn-primary { padding: 15px 40px; border: none; border-radius: 50px; font-size: 1.1em; font-weight: 600; cursor: pointer; background: linear-gradient(135deg, #ff3b9c, #9d4edd); color: white; box-shadow: 0 0 30px rgba(255, 59, 156, 0.5); transition: transform 0.3s; }
        .btn-primary:hover { transform: translateY(-2px); box-shadow: 0 0 40px rgba(255, 59, 156, 0.8); }
        .btn-secondary { padding: 15px 40px; border: 2px solid #4d9eff; border-radius: 50px; font-size: 1.1em; font-weight: 600; cursor: pointer; background: transparent; color: white; box-shadow: 0 0 20px rgba(77, 158, 255, 0.3); transition: all 0.3s; }
        .btn-secondary:hover { background: #4d9eff; box-shadow: 0 0 40px #4d9eff; }
        
        .stats-row { display: flex; gap: 50px; margin-bottom: 30px; }
        .stat-item { text-align: center; }
        .stat-number { font-size: 2em; font-weight: 700; background: linear-gradient(135deg, #ff3b9c, #9d4edd); -webkit-background-clip: text; -webkit-text-fill-color: transparent; }
        .stat-label { color: #b0b0b0; font-size: 0.9em; }
        
        /* Action Bar */
        .action-bar { 
            background: var(--card-bg); 
            backdrop-filter: blur(10px); 
            border: 1px solid var(--glass-border); 
            border-radius: 20px; 
            padding: 20px; 
            margin-bottom: 40px; 
            display: flex; 
            gap: 15px; 
            align-items: center; 
            flex-wrap: wrap; 
        }
        
        .search-box { 
            flex: 2; 
            display: flex; 
            align-items: center; 
            background: rgba(0, 0, 0, 0.3); 
            border: 1px solid var(--glass-border); 
            border-radius: 15px; 
            padding: 0 20px; 
            min-width: 250px; 
        }
        
        .search-box input { 
            flex: 1; 
            padding: 15px 0; 
            border: none; 
            background: transparent; 
            outline: none; 
            color: white; 
            font-size: 1em; 
        }
        
        .search-box input::placeholder { 
            color: #666; 
        }
        
        /* Mobile Action Toggle */
        .mobile-action-toggle {
            display: none;
            align-items: center;
            justify-content: space-between;
            background: rgba(77, 158, 255, 0.1);
            border: 1px solid #4d9eff;
            border-radius: 15px;
            padding: 12px 20px;
            cursor: pointer;
            transition: all 0.3s;
            width: 100%;
        }
        
        .mobile-action-toggle:hover {
            background: rgba(77, 158, 255, 0.2);
        }
        
        .toggle-text {
            color: #4d9eff;
            font-weight: 600;
            font-size: 1em;
        }
        
        .toggle-arrow {
            color: #4d9eff;
            font-size: 1.2em;
            transition: transform 0.3s ease;
        }
        
        .toggle-arrow.open {
            transform: rotate(180deg);
        }
        
        .action-buttons {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
            transition: all 0.3s ease;
        }
        
        .filter-btn, .category-btn, .add-btn { 
            padding: 15px 30px; 
            border: none; 
            border-radius: 15px; 
            cursor: pointer; 
            font-weight: 600; 
            font-size: 1em; 
            transition: all 0.3s; 
            white-space: nowrap; 
        }
        
        .filter-btn { 
            background: rgba(255, 255, 255, 0.05); 
            border: 1px solid var(--glass-border); 
            color: white; 
        }
        
        .filter-btn:hover { 
            background: rgba(255, 255, 255, 0.1); 
            border-color: #ff3b9c; 
        }
        
        .category-btn { 
            background: linear-gradient(135deg, #4d9eff, #0ef0f0); 
            color: #0a0a0f; 
            box-shadow: 0 0 20px rgba(77, 158, 255, 0.3); 
        }
        
        .category-btn:hover { 
            transform: translateY(-2px); 
            box-shadow: 0 0 30px rgba(77, 158, 255, 0.6); 
        }
        
        .add-btn { 
            background: linear-gradient(135deg, #ff3b9c, #9d4edd); 
            color: white; 
            box-shadow: 0 0 20px rgba(255, 59, 156, 0.3); 
        }
        
        .add-btn:hover { 
            transform: translateY(-2px); 
            box-shadow: 0 0 30px rgba(255, 59, 156, 0.6); 
        }
        
        /* Active Filters Bar */
        .active-filters {
            background: var(--card-bg);
            backdrop-filter: blur(10px);
            border: 1px solid var(--glass-border);
            border-radius: 15px;
            padding: 15px 20px;
            margin-bottom: 20px;
            display: flex;
            flex-wrap: wrap;
            align-items: center;
            gap: 15px;
        }
        
        .filter-tag {
            background: rgba(77, 158, 255, 0.2);
            border: 1px solid #4d9eff;
            color: #4d9eff;
            padding: 8px 15px;
            border-radius: 25px;
            font-size: 0.9em;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .filter-tag .remove-filter {
            cursor: pointer;
            font-size: 1.2em;
            line-height: 1;
        }
        
        .filter-tag .remove-filter:hover {
            color: #ff3b9c;
        }
        
        .clear-all-filters {
            color: #ff3b9c;
            cursor: pointer;
            font-size: 0.9em;
            margin-left: auto;
        }
        
        .clear-all-filters:hover {
            text-decoration: underline;
        }
        
        /* Contracts Grid */
        .contracts-grid { 
            display: grid; 
            grid-template-columns: repeat(auto-fill, minmax(350px, 1fr)); 
            gap: 25px; 
            margin-bottom: 60px; 
        }
        
        .contract-card {
            background: var(--card-bg);
            backdrop-filter: blur(10px);
            border: 1px solid var(--glass-border);
            border-radius: 25px;
            padding: 0;
            cursor: pointer;
            transition: all 0.3s;
            position: relative;
            overflow: hidden;
            display: flex;
            flex-direction: column;
        }
        
        .contract-image {
            width: 100%;
            height: 200px;
            overflow: hidden;
            border-radius: 25px 25px 0 0;
        }
        
        .contract-image img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            transition: transform 0.3s;
        }
        
        .contract-card:hover .contract-image img {
            transform: scale(1.05);
        }
        
        .contract-content {
            padding: 25px;
        }
        
        .contract-card:hover {
            transform: translateY(-5px);
            border-color: #ff3b9c;
            box-shadow: 0 0 30px rgba(255, 59, 156, 0.2);
        }
        
        .contract-card[data-status="In Progress"] .contract-image {
            border-bottom: 4px solid #ff3b9c;
        }
        
        .contract-card[data-status="Completed"] .contract-image {
            border-bottom: 4px solid #a4ff7c;
        }
        
        .contract-card[data-status="Not Started"] .contract-image {
            border-bottom: 4px solid #4d9eff;
        }
        
        .contract-amount { font-size: 2em; font-weight: 700; margin-bottom: 15px; background: linear-gradient(135deg, #ff3b9c, #9d4edd); -webkit-background-clip: text; -webkit-text-fill-color: transparent; }
        .contract-title { font-size: 1.3em; font-weight: 600; margin-bottom: 8px; color: white; }
        .contract-company { color: #b0b0b0; font-size: 1em; margin-bottom: 5px; }
        .contract-location { display: flex; align-items: center; gap: 8px; color: #a4ff7c; font-size: 0.95em; margin-bottom: 5px; }
        .contract-location i { color: #ff3b9c; }
        .contract-country { background: rgba(255, 59, 156, 0.1); padding: 3px 10px; border-radius: 15px; display: inline-block; margin-bottom: 10px; }
        .contract-meta { display: flex; justify-content: space-between; align-items: center; margin-top: 20px; }
        
        .status-badge { display: inline-block; padding: 6px 15px; border-radius: 30px; font-size: 0.9em; font-weight: 500; }
        .status-badge.in-progress { background: rgba(255, 59, 156, 0.2); color: #ff3b9c; border: 1px solid #ff3b9c; }
        .status-badge.completed { background: rgba(164, 255, 124, 0.2); color: #a4ff7c; border: 1px solid #a4ff7c; }
        .status-badge.not-started { background: rgba(77, 158, 255, 0.2); color: #4d9eff; border: 1px solid #4d9eff; }
        
        .contract-date { color: #666; font-size: 0.9em; display: flex; align-items: center; gap: 5px; }
        
        .progress-list { background: var(--card-bg); backdrop-filter: blur(10px); border: 1px solid var(--glass-border); border-radius: 25px; overflow: hidden; }
        .progress-item { display: flex; align-items: center; padding: 20px 25px; border-bottom: 1px solid var(--glass-border); cursor: pointer; transition: all 0.3s; }
        .progress-item:hover { background: rgba(255, 255, 255, 0.05); }
        .progress-status { width: 12px; height: 12px; border-radius: 50%; margin-right: 20px; }
        .progress-status.in-progress { background: #ff3b9c; box-shadow: 0 0 15px #ff3b9c; }
        .progress-status.completed { background: #a4ff7c; box-shadow: 0 0 15px #a4ff7c; }
        .progress-status.not-started { background: #4d9eff; box-shadow: 0 0 15px #4d9eff; }
        .progress-content { flex: 1; }
        .progress-title { font-weight: 600; margin-bottom: 5px; color: white; }
        .progress-title span { color: #ff3b9c; margin-right: 10px; }
        .progress-location { color: #a4ff7c; font-size: 0.9em; margin-bottom: 5px; }
        .progress-date { color: #666; font-size: 0.9em; }
        
        .featured-section { display: grid; grid-template-columns: 1fr 1fr; gap: 30px; margin: 60px 0; }
        .featured-card { background: var(--card-bg); backdrop-filter: blur(10px); border: 1px solid var(--glass-border); border-radius: 30px; padding: 30px; }
        .featured-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 25px; }
        .featured-header h3 { font-size: 1.5em; background: linear-gradient(135deg, #ff3b9c, #9d4edd); -webkit-background-clip: text; -webkit-text-fill-color: transparent; }
        .see-all { color: #4d9eff; cursor: pointer; font-size: 0.9em; transition: color 0.3s; }
        .see-all:hover { color: #ff3b9c; text-decoration: underline; }
        
        .bid-item { display: flex; justify-content: space-between; align-items: center; padding: 15px 0; border-bottom: 1px solid var(--glass-border); }
        .bid-item:last-child { border-bottom: none; }
        .bid-info { display: flex; align-items: center; gap: 15px; }
        .bid-avatar { width: 40px; height: 40px; border-radius: 50%; background: linear-gradient(135deg, #ff3b9c, #9d4edd); display: flex; align-items: center; justify-content: center; font-size: 1.2em; }
        .bid-name { font-weight: 600; }
        .bid-amount { color: #a4ff7c; font-weight: 600; }
        .bid-button { padding: 8px 20px; border: 1px solid #4d9eff; border-radius: 25px; background: transparent; color: white; cursor: pointer; transition: all 0.3s; }
        .bid-button:hover { background: #4d9eff; box-shadow: 0 0 20px #4d9eff; }
        
        /* Timer Section */
        .timer-section { 
            background: linear-gradient(135deg, rgba(255, 59, 156, 0.1), rgba(157, 78, 221, 0.1)); 
            border: 1px solid var(--glass-border); 
            border-radius: 30px; 
            padding: 40px; 
            margin: 60px 0; 
            display: flex; 
            justify-content: space-between; 
            align-items: center; 
            flex-wrap: wrap;
            gap: 20px;
        }
        
        .timer-info { 
            flex: 1;
            min-width: 250px;
        }
        
        .timer-info h3 { 
            font-size: 2em; 
            margin-bottom: 10px; 
        }
        
        .timezone-info {
            color: #a4ff7c;
            font-size: 0.9em;
            margin-top: 5px;
            font-family: monospace;
            background: rgba(164, 255, 124, 0.1);
            padding: 5px 15px;
            border-radius: 20px;
            display: inline-block;
        }
        
        .timer { 
            display: flex; 
            gap: 30px; 
            flex-wrap: wrap;
            justify-content: center;
        }
        
        .timer-unit { 
            text-align: center; 
            min-width: 80px;
        }
        
        .timer-value { 
            font-size: 2.5em; 
            font-weight: 700; 
            background: linear-gradient(135deg, #ff3b9c, #9d4edd); 
            -webkit-background-clip: text; 
            -webkit-text-fill-color: transparent; 
        }
        
        .timer-label { 
            color: #666; 
            font-size: 0.9em; 
        }
        
        /* Modal */
        .modal { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0, 0, 0, 0.8); backdrop-filter: blur(10px); z-index: 1000; align-items: center; justify-content: center; }
        .modal-content { background: var(--card-bg); backdrop-filter: blur(20px); border: 1px solid var(--glass-border); border-radius: 30px; padding: 40px; max-width: 600px; width: 90%; max-height: 90vh; overflow-y: auto; box-shadow: 0 0 50px rgba(255, 59, 156, 0.3); }
        .modal-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 30px; padding-bottom: 15px; border-bottom: 1px solid var(--glass-border); }
        .modal-header h2 { font-size: 1.8em; background: linear-gradient(135deg, #ff3b9c, #9d4edd); -webkit-background-clip: text; -webkit-text-fill-color: transparent; }
        .close-btn { font-size: 1.5em; cursor: pointer; color: #666; transition: color 0.3s; }
        .close-btn:hover { color: #ff3b9c; }
        
        /* Category Filter Modal */
        .category-filters {
            display: flex;
            flex-direction: column;
            gap: 25px;
            margin-bottom: 30px;
        }
        
        .filter-group {
            background: rgba(255,255,255,0.03);
            border-radius: 15px;
            padding: 20px;
        }
        
        .filter-group h3 {
            color: #ff3b9c;
            margin-bottom: 15px;
            font-size: 1.2em;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .filter-select {
            width: 100%;
            padding: 12px 15px;
            background: rgba(0, 0, 0, 0.3);
            border: 1px solid var(--glass-border);
            border-radius: 10px;
            color: white;
            font-size: 1em;
            cursor: pointer;
        }
        
        .filter-select:focus {
            outline: none;
            border-color: #ff3b9c;
        }
        
        .filter-select option {
            background: #1a1a1a;
            color: white;
        }
        
        .filter-actions {
            display: flex;
            gap: 15px;
            margin-top: 20px;
        }
        
        .filter-actions button {
            flex: 1;
            padding: 15px;
            border: none;
            border-radius: 10px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .apply-filters {
            background: linear-gradient(135deg, #ff3b9c, #9d4edd);
            color: white;
        }
        
        .reset-filters {
            background: transparent;
            border: 1px solid var(--glass-border);
            color: white;
        }
        
        .apply-filters:hover {
            transform: translateY(-2px);
            box-shadow: 0 0 20px rgba(255, 59, 156, 0.5);
        }
        
        .reset-filters:hover {
            border-color: #ff3b9c;
            color: #ff3b9c;
        }
        
        /* Form Styles */
        .form-group { margin-bottom: 20px; }
        .form-group label { display: block; margin-bottom: 8px; color: #b0b0b0; font-size: 0.9em; }
        .form-group input, .form-group select, .form-group textarea {
            width: 100%; padding: 12px 15px; background: rgba(0, 0, 0, 0.3); border: 1px solid var(--glass-border); border-radius: 10px; color: white; font-size: 1em; transition: all 0.3s;
        }
        .form-group input:focus, .form-group select:focus, .form-group textarea:focus {
            outline: none; border-color: #ff3b9c; box-shadow: 0 0 20px rgba(255, 59, 156, 0.3);
        }
        .form-group textarea { min-height: 80px; resize: vertical; }
        .form-row { display: grid; grid-template-columns: 1fr 1fr; gap: 15px; }
        
        .image-upload-container {
            border: 2px dashed var(--glass-border);
            border-radius: 15px;
            padding: 30px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s;
            margin-bottom: 20px;
        }
        
        .image-upload-container:hover {
            border-color: #ff3b9c;
            background: rgba(255, 59, 156, 0.05);
        }
        
        .image-upload-container.dragover {
            border-color: #a4ff7c;
            background: rgba(164, 255, 124, 0.05);
        }
        
        .image-preview {
            width: 100%;
            max-height: 200px;
            border-radius: 10px;
            overflow: hidden;
            margin-top: 15px;
            display: none;
        }
        
        .image-preview img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }
        
        .upload-icon {
            font-size: 3em;
            margin-bottom: 10px;
            color: #666;
        }
        
        .upload-text {
            color: #b0b0b0;
            margin-bottom: 5px;
        }
        
        .upload-hint {
            color: #666;
            font-size: 0.8em;
        }
        
        .form-actions { display: flex; gap: 15px; margin-top: 30px; }
        .btn-submit { flex: 1; padding: 15px; background: linear-gradient(135deg, #ff3b9c, #9d4edd); color: white; border: none; border-radius: 10px; font-weight: 600; cursor: pointer; transition: all 0.3s; }
        .btn-submit:hover { transform: translateY(-2px); box-shadow: 0 0 30px rgba(255, 59, 156, 0.5); }
        .btn-cancel { flex: 1; padding: 15px; background: transparent; border: 1px solid var(--glass-border); color: white; border-radius: 10px; font-weight: 600; cursor: pointer; transition: all 0.3s; }
        .btn-cancel:hover { border-color: #ff3b9c; color: #ff3b9c; }
        
        .success-message { background: rgba(164, 255, 124, 0.1); border: 1px solid #a4ff7c; color: #a4ff7c; padding: 15px; border-radius: 10px; margin-bottom: 20px; text-align: center; }
        .error-message { background: rgba(255, 59, 156, 0.1); border: 1px solid #ff3b9c; color: #ff3b9c; padding: 15px; border-radius: 10px; margin-bottom: 20px; text-align: center; }
        
        .spinner { display: inline-block; width: 20px; height: 20px; border: 2px solid rgba(255,255,255,0.3); border-radius: 50%; border-top-color: #ff3b9c; animation: spin 1s ease-in-out infinite; }
        @keyframes spin { to { transform: rotate(360deg); } }
        
        /* Detail Views */
        .detail-image {
            width: 100%;
            max-height: 300px;
            border-radius: 15px;
            overflow: hidden;
            margin-bottom: 20px;
        }
        
        .detail-image img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }
        
        .filter-option { padding: 15px; margin: 8px 0; border-radius: 15px; cursor: pointer; background: rgba(255, 255, 255, 0.05); border: 1px solid var(--glass-border); transition: all 0.3s; }
        .filter-option:hover { border-color: #ff3b9c; background: rgba(255, 59, 156, 0.1); }
        .filter-option.selected { background: linear-gradient(135deg, #ff3b9c, #9d4edd); border: none; }
        .filter-actions { display: flex; justify-content: space-between; margin-top: 30px; padding-top: 20px; border-top: 1px solid var(--glass-border); }
        .btn-secondary { padding: 12px 25px; background: rgba(255, 255, 255, 0.05); border: 1px solid var(--glass-border); border-radius: 15px; color: white; cursor: pointer; transition: all 0.3s; }
        .btn-secondary:hover { border-color: #ff3b9c; }
        
        .detail-grid { background: rgba(0, 0, 0, 0.3); border-radius: 20px; padding: 25px; }
        .detail-row { display: grid; grid-template-columns: 120px 1fr; padding: 15px 0; border-bottom: 1px solid var(--glass-border); }
        .detail-row:last-child { border-bottom: none; }
        .detail-label { color: #b0b0b0; font-weight: 500; }
        .detail-value { color: white; }
        .submitted-by { display: flex; align-items: center; gap: 20px; margin-top: 20px; padding: 20px; background: rgba(255, 255, 255, 0.05); border-radius: 15px; border: 1px solid var(--glass-border); }
        .submitted-by img { width: 60px; height: 60px; border-radius: 50%; border: 2px solid #ff3b9c; }
        
        /* Staff Detail Modal */
        .staff-info {
            background: rgba(0, 0, 0, 0.3);
            border-radius: 20px;
            padding: 25px;
            margin-bottom: 25px;
        }
        
        .staff-header {
            display: flex;
            align-items: center;
            gap: 20px;
            margin-bottom: 25px;
            padding-bottom: 20px;
            border-bottom: 1px solid var(--glass-border);
        }
        
        .staff-avatar-large {
            width: 80px;
            height: 80px;
            border-radius: 50%;
            background: linear-gradient(135deg, #ff3b9c, #9d4edd);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 3em;
        }
        
        .staff-title h3 {
            font-size: 2em;
            margin-bottom: 5px;
        }
        
        .staff-title p {
            color: #b0b0b0;
        }
        
        .staff-detail-row {
            display: flex;
            justify-content: space-between;
            padding: 12px 0;
            border-bottom: 1px solid var(--glass-border);
        }
        
        .staff-detail-label {
            color: #b0b0b0;
        }
        
        .staff-detail-value {
            color: #a4ff7c;
            font-weight: 600;
        }
        
        .category-section {
            margin-top: 25px;
        }
        
        .category-title {
            font-size: 1.2em;
            margin-bottom: 15px;
            color: #ff3b9c;
        }
        
        .category-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 15px;
        }
        
        .category-item {
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid var(--glass-border);
            border-radius: 15px;
            padding: 15px;
            text-align: center;
        }
        
        .category-name {
            font-size: 0.9em;
            color: #b0b0b0;
            margin-bottom: 5px;
        }
        
        .category-points {
            font-size: 1.5em;
            font-weight: 700;
            background: linear-gradient(135deg, #ff3b9c, #9d4edd);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }
        
        .total-points {
            margin-top: 20px;
            padding: 15px;
            background: linear-gradient(135deg, rgba(255, 59, 156, 0.2), rgba(157, 78, 221, 0.2));
            border-radius: 15px;
            text-align: center;
        }
        
        .total-points-label {
            font-size: 1.1em;
            color: #b0b0b0;
            margin-bottom: 5px;
        }
        
        .total-points-value {
            font-size: 2.5em;
            font-weight: 700;
            background: linear-gradient(135deg, #ff3b9c, #9d4edd);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }
        
        /* All Contracts Modal List */
        .all-contracts-list {
            max-height: 60vh;
            overflow-y: auto;
            padding-right: 10px;
        }
        
        .all-contracts-list::-webkit-scrollbar {
            width: 8px;
        }
        
        .all-contracts-list::-webkit-scrollbar-track {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 10px;
        }
        
        .all-contracts-list::-webkit-scrollbar-thumb {
            background: linear-gradient(135deg, #ff3b9c, #9d4edd);
            border-radius: 10px;
        }
        
        .contract-list-item {
            display: flex;
            align-items: center;
            padding: 15px 0;
            border-bottom: 1px solid var(--glass-border);
            gap: 15px;
        }
        
        .contract-list-item:last-child {
            border-bottom: none;
        }
        
        .list-item-image {
            width: 60px;
            height: 60px;
            border-radius: 10px;
            overflow: hidden;
            flex-shrink: 0;
        }
        
        .list-item-image img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }
        
        .list-item-content {
            flex: 1;
            min-width: 0;
        }
        
        .list-item-title {
            font-weight: 600;
            color: white;
            margin-bottom: 5px;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }
        
        .list-item-details {
            display: flex;
            align-items: center;
            gap: 15px;
            flex-wrap: wrap;
        }
        
        .list-item-amount {
            font-size: 1.1em;
            font-weight: 600;
            background: linear-gradient(135deg, #ff3b9c, #9d4edd);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }
        
        .list-item-status {
            font-size: 0.85em;
            padding: 4px 12px;
            border-radius: 20px;
        }
        
        .list-item-status.in-progress {
            background: rgba(255, 59, 156, 0.2);
            color: #ff3b9c;
            border: 1px solid #ff3b9c;
        }
        
        .list-item-status.completed {
            background: rgba(164, 255, 124, 0.2);
            color: #a4ff7c;
            border: 1px solid #a4ff7c;
        }
        
        .list-item-status.not-started {
            background: rgba(77, 158, 255, 0.2);
            color: #4d9eff;
            border: 1px solid #4d9eff;
        }
        
        .list-item-button {
            padding: 8px 20px;
            border: 1px solid #4d9eff;
            border-radius: 25px;
            background: transparent;
            color: white;
            cursor: pointer;
            transition: all 0.3s;
            flex-shrink: 0;
            font-size: 0.9em;
        }
        
        .list-item-button:hover {
            background: #4d9eff;
            box-shadow: 0 0 20px #4d9eff;
        }
        
        /* PIN System Styles */
        .pin-badge {
            background: linear-gradient(135deg, #ff3b9c, #9d4edd);
            color: white;
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 0.8em;
            margin-left: 10px;
        }
        
        .phone-locked {
            filter: blur(4px);
            user-select: none;
            background: rgba(255, 59, 156, 0.1);
            padding: 5px 10px;
            border-radius: 8px;
            display: inline-block;
        }
        
        .pin-input-group {
            display: flex;
            flex-direction: column;
            gap: 15px;
            margin: 15px 0;
        }
        
        .pin-input {
            width: 100%;
            padding: 12px;
            background: rgba(0, 0, 0, 0.3);
            border: 1px solid var(--glass-border);
            border-radius: 10px;
            color: white;
            font-size: 1.2em;
            letter-spacing: 4px;
            text-align: center;
        }
        
        .pin-input:focus {
            border-color: #ff3b9c;
            box-shadow: 0 0 20px rgba(255, 59, 156, 0.3);
        }
        
        .pin-button {
            padding: 12px 25px;
            background: linear-gradient(135deg, #ff3b9c, #9d4edd);
            color: white;
            border: none;
            border-radius: 10px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s;
            position: relative;
            width: 100%;
        }
        
        .pin-button.loading {
            color: transparent !important;
            pointer-events: none;
        }
        
        .pin-button.loading::after {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 20px;
            height: 20px;
            border: 2px solid rgba(255,255,255,0.3);
            border-top-color: white;
            border-radius: 50%;
            animation: spin 0.8s linear infinite;
        }
        
        .pin-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 0 20px rgba(255, 59, 156, 0.5);
        }
        
        .pin-button.secondary {
            background: transparent;
            border: 1px solid #4d9eff;
        }
        
        .pin-button.secondary:hover {
            background: #4d9eff;
        }
        
        .pins-remaining {
            display: inline-block;
            background: rgba(77, 158, 255, 0.2);
            border: 1px solid #4d9eff;
            color: #4d9eff;
            padding: 5px 15px;
            border-radius: 25px;
            font-size: 0.9em;
            margin-top: 10px;
        }
        
        .call-button {
            display: inline-flex;
            align-items: center;
            gap: 8px;
            padding: 10px 20px;
            background: #4d9eff;
            color: white;
            text-decoration: none;
            border-radius: 25px;
            font-weight: 600;
            transition: all 0.3s;
            margin-top: 10px;
        }
        
        .call-button:hover {
            transform: scale(1.05);
            box-shadow: 0 0 20px #4d9eff;
        }
        
        .pricing-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 15px;
            margin: 20px 0;
        }
        
        .pricing-card {
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid var(--glass-border);
            border-radius: 15px;
            padding: 20px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .pricing-card:hover {
            border-color: #ff3b9c;
            transform: translateY(-5px);
        }
        
        .pricing-card.selected {
            border-color: #ff3b9c;
            background: rgba(255, 59, 156, 0.1);
            box-shadow: 0 0 30px rgba(255, 59, 156, 0.3);
        }
        
        .pricing-quantity {
            font-size: 2em;
            font-weight: 700;
            background: linear-gradient(135deg, #ff3b9c, #9d4edd);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }
        
        .pricing-price {
            font-size: 1.2em;
            color: #a4ff7c;
            margin: 10px 0;
        }
        
        .pricing-bonus {
            font-size: 0.9em;
            color: #b0b0b0;
        }
        
        .email-section {
            margin: 20px 0;
            padding: 20px;
            background: rgba(0, 0, 0, 0.2);
            border-radius: 15px;
        }
        
        .email-input-group {
            display: flex;
            gap: 10px;
            margin-top: 10px;
        }
        
        .divider {
            display: flex;
            align-items: center;
            text-align: center;
            margin: 20px 0;
        }
        
        .divider::before,
        .divider::after {
            content: '';
            flex: 1;
            border-bottom: 1px solid var(--glass-border);
        }
        
        .divider span {
            padding: 0 10px;
            color: #b0b0b0;
        }
        
        /* Loading Container */
        .loading-container {
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 200px;
            width: 100%;
        }
        
        @media (max-width: 768px) {
            .header {
                padding: 15px 20px;
            }
            
            .nav-buttons, .language-selector {
                display: none;
            }
            
            .free-pin-btn {
                display: none;
            }
            
            .menu-toggle {
                display: flex;
            }
            
            .mobile-menu {
                display: block;
            }
            
            .action-bar {
                flex-direction: column;
                align-items: stretch;
                padding: 15px;
            }
            
            .search-box {
                width: 100%;
                margin-bottom: 10px;
            }
            
            .mobile-action-toggle {
                display: flex;
            }
            
            .action-buttons {
                display: none;
                flex-direction: column;
                width: 100%;
                margin-top: 10px;
            }
            
            .action-buttons.show {
                display: flex;
            }
            
            .filter-btn, .category-btn, .add-btn {
                width: 100%;
                margin: 0;
            }
            
            .timer-section {
                flex-direction: column;
                text-align: center;
            }
            
            .timer {
                justify-content: center;
            }
            
            .timezone-info {
                font-size: 0.8em;
                padding: 4px 10px;
            }
            
            .hero-title { font-size: 3em; }
            .hero-section { flex-direction: column; }
            .hero-image-container { display: none; }
            .featured-section { grid-template-columns: 1fr; }
            .youtube-banner { flex-direction: column; text-align: center; padding: 30px; }
            .banner-content { max-width: 100%; }
            .banner-content h3 { font-size: 2.5em; }
            .banner-avatar { margin-left: 0; margin-top: 30px; }
            .stats-row { gap: 25px; }
            .hero-buttons { display: none; }
            .form-row { grid-template-columns: 1fr; }
            .section-header h2 { font-size: 1.5em; }
            .banner-stats { flex-wrap: wrap; gap: 15px; }
            .banner-stats .stat { padding: 8px 15px; }
            .category-grid { grid-template-columns: repeat(2, 1fr); }
            .contract-list-item { flex-wrap: wrap; }
            .list-item-details { width: 100%; justify-content: space-between; }
            .modal-header h2 { font-size: 1.5em; }
            .list-item-status { display: none; }
            .pricing-grid {
                grid-template-columns: 1fr;
            }
            .pin-input-group {
                flex-direction: column;
            }
            .email-input-group {
                flex-direction: column;
            }
        }
    </style>

    <!-- Load configuration first -->
    <script src="config.js"></script>
</head>
<body>
    <!-- Toast Notifications Container -->
    <div class="toast-container" id="toastContainer"></div>

    <!-- Header -->
    <div class="header" id="mainHeader">
        <div class="logo">K.R.O Media</div>
        
        <!-- Desktop Navigation -->
        <div class="nav-buttons">
            <button class="nav-btn active" onclick="showPage('home')">HOME</button>
            <button class="nav-btn" onclick="showPage('progress')">PROGRESS</button>
            <button class="free-pin-btn" onclick="openFreePinModal()"> Get Free Pins</button>
            
            <!-- Language Selector -->
            <div class="language-selector">
                <button class="lang-btn" onclick="toggleLanguageDropdown()">
                     <span id="selectedLang">English</span> 
                </button>
                <div class="lang-dropdown" id="langDropdown">
                    <div class="lang-option active" onclick="changeLanguage('en')"> English</div>
                    <div class="lang-option" onclick="changeLanguage('es')"> Espaol</div>
                    <div class="lang-option" onclick="changeLanguage('fr')"> Franais</div>
                    <div class="lang-option" onclick="changeLanguage('de')"> Deutsch</div>
                    <div class="lang-option" onclick="changeLanguage('pt')"> Portugus</div>
                    <div class="lang-option" onclick="changeLanguage('zh')"> </div>
                    <div class="lang-option" onclick="changeLanguage('ar')"> </div>
                    <div class="lang-option" onclick="changeLanguage('hi')"> </div>
                    <div class="lang-option" onclick="changeLanguage('ja')"> </div>
                    <div class="lang-option" onclick="changeLanguage('ru')"> </div>
                </div>
            </div>
        </div>

        <!-- Mobile Menu Toggle -->
        <div class="menu-toggle" onclick="toggleMobileMenu()">
            <span></span>
            <span></span>
            <span></span>
        </div>
    </div>

    <!-- Mobile Menu -->
    <div class="mobile-menu" id="mobileMenu">
        <div class="mobile-nav-buttons">
            <button class="mobile-nav-btn active" onclick="showMobilePage('home')"> HOME</button>
            <button class="mobile-nav-btn" onclick="showMobilePage('progress')"> PROGRESS</button>
            <button class="mobile-free-pin-btn" onclick="openFreePinModal(); toggleMobileMenu();"> Get Free Pins</button>
            
            <!-- Mobile Language Selector -->
            <div class="mobile-lang-selector">
                <div class="mobile-lang-options">
                    <div class="mobile-lang-option active" onclick="changeLanguage('en'); toggleMobileMenu();"> English</div>
                    <div class="mobile-lang-option" onclick="changeLanguage('es'); toggleMobileMenu();"> Espaol</div>
                    <div class="mobile-lang-option" onclick="changeLanguage('fr'); toggleMobileMenu();"> Franais</div>
                    <div class="mobile-lang-option" onclick="changeLanguage('de'); toggleMobileMenu();"> Deutsch</div>
                    <div class="mobile-lang-option" onclick="changeLanguage('pt'); toggleMobileMenu();"> Portugus</div>
                    <div class="mobile-lang-option" onclick="changeLanguage('zh'); toggleMobileMenu();"> </div>
                    <div class="mobile-lang-option" onclick="changeLanguage('ar'); toggleMobileMenu();"> </div>
                    <div class="mobile-lang-option" onclick="changeLanguage('hi'); toggleMobileMenu();"> </div>
                    <div class="mobile-lang-option" onclick="changeLanguage('ja'); toggleMobileMenu();"> </div>
                    <div class="mobile-lang-option" onclick="changeLanguage('ru'); toggleMobileMenu();"> </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Main Container -->
    <div class="container">
        <!-- YouTube Banners Section -->
        <div class="youtube-section">
            <div class="section-header">
                <h2 data-i18n="youtube_title"> K.R.O MOVIES</h2>
                <a href="https://youtube.com/@kromedia_ng?si=oxZZO61Ro0ezW9qN" target="_blank" rel="noopener noreferrer"><span class="see-all" data-i18n="see_all">See All </span></a>
            </div>
            
            <div class="banners-container">
                <div class="banners-slider" id="bannersSlider">
                    <!-- Banners will be loaded dynamically -->
                    <div class="banner-slide">
                        <div class="image-loading" style="height: 400px;">
                            <div class="neon-loading">
                                <div class="neon-dot"></div>
                                <div class="neon-dot"></div>
                                <div class="neon-dot"></div>
                                <div class="neon-dot"></div>
                                <div class="neon-dot"></div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="slider-controls" id="sliderControls">
                <div class="slider-dot active"></div>
            </div>
        </div>

        <!-- Hero Section -->
        <div class="hero-section">
            <div class="hero-content">
                <h1 class="hero-title">
                    <span class="neon" data-i18n="hero_get">GET K.R.O</span>
                    <span class="creators" data-i18n="hero_contracts">CONTRACTS</span>
                </h1>
                <p class="hero-description" data-i18n="hero_description">
                    K.R.O Contracts brings together colleagues to support each other. Create, track, and resolve support contracts in a secure, transparent environment.
                </p>
                
                <div class="stats-row" id="statsRow">
                    <div class="stat-item">
                        <div class="stat-number" id="activeUsers">0</div>
                        <div class="stat-label" data-i18n="active_users">Active Users</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-number" id="completedContracts">0</div>
                        <div class="stat-label" data-i18n="completed_contracts">Completed Contracts</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-number" id="totalSupport">0</div>
                        <div class="stat-label" data-i18n="total_support">Total Support</div>
                    </div>
                </div>

                <div class="hero-buttons">
                    <button class="btn-primary" onclick="openAddModal()" data-i18n="create_contract">CREATE CONTRACT</button>
                    <button class="btn-secondary" onclick="showPage('progress')" data-i18n="view_progress">VIEW PROGRESS</button>
                </div>
            </div>
            
            <div class="hero-image-container">
                <div class="glow-circle circle-1"></div>
                <div class="glow-circle circle-2"></div>
                <div class="glow-circle circle-3"></div>
                <div class="hero-floating-image" id="heroImage">
                    <img src="https://images.unsplash.com/photo-1573164713988-8665fc963095?w=800&auto=format" alt="Hero Image">
                </div>
            </div>
        </div>

        <!-- Action Bar -->
        <div class="action-bar">
            <div class="search-box">
                <input type="text" placeholder="Search contracts..." id="searchInput" onkeyup="searchContracts()" data-i18n-placeholder="search_placeholder">
            </div>
            
            <!-- Mobile Action Toggle -->
            <div class="mobile-action-toggle" onclick="toggleMobileActions()">
                <span class="toggle-text" data-i18n="actions">Actions</span>
                <span class="toggle-arrow" id="mobileActionArrow"></span>
            </div>
            
            <!-- Action Buttons Container (hidden on mobile by default) -->
            <div class="action-buttons" id="mobileActionButtons">
                <button class="filter-btn" onclick="openFilterModal()" data-i18n="filter">FILTER</button>
                <button class="category-btn" onclick="openCategoryModal()" data-i18n="categories">CATEGORIES</button>
                <button class="add-btn" onclick="openAddModal()" data-i18n="create">+ CREATE</button>
            </div>
        </div>

        <!-- Active Filters Bar (hidden by default) -->
        <div class="active-filters" id="activeFiltersBar" style="display: none;">
            <span data-i18n="active_filters">Active Filters:</span>
            <div id="countryFilterTag" class="filter-tag" style="display: none;">
                <span id="selectedCountryDisplay"></span>
                <span class="remove-filter" onclick="removeFilter('country')"></span>
            </div>
            <div id="cityFilterTag" class="filter-tag" style="display: none;">
                <span id="selectedCityDisplay"></span>
                <span class="remove-filter" onclick="removeFilter('city')"></span>
            </div>
            <div class="clear-all-filters" onclick="clearAllFilters()" data-i18n="clear_all">Clear All</div>
        </div>

        <!-- Home Page -->
        <div id="homePage">
            <div class="section-header">
                <h2 data-i18n="active_contracts">Active Contracts</h2>
                <span class="see-all" onclick="openAllContractsModal()" data-i18n="see_all_contracts">See All </span>
            </div>
            <div class="contracts-grid" id="contractsGrid">
                <div class="loading-container">
                    <div class="neon-loading">
                        <div class="neon-dot"></div>
                        <div class="neon-dot"></div>
                        <div class="neon-dot"></div>
                        <div class="neon-dot"></div>
                        <div class="neon-dot"></div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Progress Page -->
        <div id="progressPage" style="display: none;">
            <div class="section-header">
                <h2 data-i18n="progress_report">Progress Report</h2>
                <span class="see-all" data-i18n="see_all">See All </span>
            </div>
            <div class="progress-list" id="progressList">
                <div class="loading-container">
                    <div class="neon-loading">
                        <div class="neon-dot"></div>
                        <div class="neon-dot"></div>
                        <div class="neon-dot"></div>
                        <div class="neon-dot"></div>
                        <div class="neon-dot"></div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Featured Sections -->
        <div class="featured-section">
            <div class="featured-card">
                <div class="featured-header">
                    <h3 data-i18n="top_contracts"> Top 5 Highest Contracts</h3>
                    <span class="see-all" data-i18n="see_all">See All </span>
                </div>
                <div id="topContractsList">
                    <div class="loading-container">
                        <div class="neon-loading">
                            <div class="neon-dot"></div>
                            <div class="neon-dot"></div>
                            <div class="neon-dot"></div>
                            <div class="neon-dot"></div>
                            <div class="neon-dot"></div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="featured-card">
                <div class="featured-header">
                    <h3 data-i18n="top_staff"> Top 5 Staff</h3>
                    <span class="see-all" data-i18n="see_all">See All </span>
                </div>
                <div id="topStaffList">
                    <div class="loading-container">
                        <div class="neon-loading">
                            <div class="neon-dot"></div>
                            <div class="neon-dot"></div>
                            <div class="neon-dot"></div>
                            <div class="neon-dot"></div>
                            <div class="neon-dot"></div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Timer Section - Live Date & Time -->
        <div class="timer-section">
            <div class="timer-info">
                <h3 class="glow-pink" data-i18n="current_date_time">Current Date & Time</h3>
                <p id="timezoneDisplay" class="timezone-info"></p>
            </div>
            <div class="timer" id="liveClock">
                <div class="timer-unit">
                    <div class="timer-value" id="currentDay">00</div>
                    <div class="timer-label" data-i18n="day">Day</div>
                </div>
                <div class="timer-unit">
                    <div class="timer-value" id="currentMonth">00</div>
                    <div class="timer-label" data-i18n="month">Month</div>
                </div>
                <div class="timer-unit">
                    <div class="timer-value" id="currentYear">0000</div>
                    <div class="timer-label" data-i18n="year">Year</div>
                </div>
                <div class="timer-unit">
                    <div class="timer-value" id="currentTime">00:00:00</div>
                    <div class="timer-label" data-i18n="time">Time</div>
                </div>
            </div>
        </div>
    </div>

    <!-- Filter Modal (Status) -->
    <div class="modal" id="filterModal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 data-i18n="filter_by_status">Filter by Status</h2>
                <span class="close-btn" onclick="closeFilterModal()">&times;</span>
            </div>
            <div class="filter-option" onclick="selectFilter('all')" id="filterAll" data-i18n="all_contracts"> All Contracts</div>
            <div class="filter-option" onclick="selectFilter('In Progress')" id="filterInProgress" data-i18n="in_progress"> In Progress</div>
            <div class="filter-option" onclick="selectFilter('Completed')" id="filterCompleted" data-i18n="completed"> Completed</div>
            <div class="filter-option" onclick="selectFilter('Not Started')" id="filterNotStarted" data-i18n="not_started"> Not Started</div>
            <div class="filter-actions">
                <button onclick="clearFilter()" class="btn-secondary" data-i18n="clear_all">Clear all</button>
                <button onclick="applyFilter()" class="btn-primary" style="padding: 12px 25px;" data-i18n="done">Done</button>
            </div>
        </div>
    </div>

    <!-- Category Filter Modal (New) -->
    <div class="modal" id="categoryModal">
        <div class="modal-content" style="max-width: 500px;">
            <div class="modal-header">
                <h2 data-i18n="browse_by_location"> Browse by Location</h2>
                <span class="close-btn" onclick="closeCategoryModal()">&times;</span>
            </div>
            
            <div class="category-filters">
                <div class="filter-group">
                    <h3><span></span> <span data-i18n="select_country">Select Country</span></h3>
                    <select class="filter-select" id="countryFilter">
                        <option value="" data-i18n="all_countries">All Countries</option>
                        <option value="USA"> United States</option>
                        <option value="UK"> United Kingdom</option>
                        <option value="Canada"> Canada</option>
                        <option value="Australia"> Australia</option>
                        <option value="Germany"> Germany</option>
                        <option value="France"> France</option>
                        <option value="Spain"> Spain</option>
                        <option value="Italy"> Italy</option>
                        <option value="Japan"> Japan</option>
                        <option value="China"> China</option>
                        <option value="India"> India</option>
                        <option value="Brazil"> Brazil</option>
                        <option value="Nigeria"> Nigeria</option>
                        <option value="South Africa"> South Africa</option>
                        <option value="Kenya"> Kenya</option>
                        <option value="Ghana"> Ghana</option>
                    </select>
                </div>

                <div class="filter-group">
                    <h3><span></span> <span data-i18n="select_city_state">Select City/State</span></h3>
                    <select class="filter-select" id="cityFilter">
                        <option value="" data-i18n="all_cities">All Cities/States</option>
                    </select>
                    <p style="color: #b0b0b0; font-size: 0.85em; margin-top: 8px;" data-i18n="city_note">* Cities will update based on selected country</p>
                </div>
            </div>

            <div class="filter-actions">
                <button class="reset-filters" onclick="resetCategoryFilters()" data-i18n="reset">Reset</button>
                <button class="apply-filters" onclick="applyCategoryFilters()" data-i18n="apply_filters">Apply Filters</button>
            </div>
        </div>
    </div>

    <!-- ADD CONTRACT MODAL (Updated with Country/City) -->
    <div class="modal" id="addModal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 data-i18n="create_new_contract">Create New Contract</h2>
                <span class="close-btn" onclick="closeAddModal()">&times;</span>
            </div>
            
            <div id="formMessage"></div>
            
            <form id="addContractForm" onsubmit="saveNewContract(event)">
                <div class="form-group">
                    <label data-i18n="title">Title</label>
                    <input type="text" id="title" placeholder="e.g., Cleaning Lady Needed" required>
                </div>
                
                <div class="form-group">
                    <label data-i18n="company">Company</label>
                    <input type="text" id="company" placeholder="e.g., K.R.O Services" required>
                </div>
                
                <!-- New Location Fields -->
                <div class="form-row">
                    <div class="form-group">
                        <label data-i18n="country">Country</label>
                        <select id="country" required>
                            <option value="">Select Country</option>
                            <option value="USA"> United States</option>
                            <option value="UK"> United Kingdom</option>
                            <option value="Canada"> Canada</option>
                            <option value="Australia"> Australia</option>
                            <option value="Germany"> Germany</option>
                            <option value="France"> France</option>
                            <option value="Spain"> Spain</option>
                            <option value="Italy"> Italy</option>
                            <option value="Japan"> Japan</option>
                            <option value="China"> China</option>
                            <option value="India"> India</option>
                            <option value="Brazil"> Brazil</option>
                            <option value="Nigeria"> Nigeria</option>
                            <option value="South Africa"> South Africa</option>
                            <option value="Kenya"> Kenya</option>
                            <option value="Ghana"> Ghana</option>
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label data-i18n="city_state">City/State</label>
                        <input type="text" id="city" placeholder="e.g., Lagos, New York, London" required>
                    </div>
                </div>
                
                <div class="form-group">
                    <label data-i18n="description">Description</label>
                    <textarea id="description" placeholder="Describe the contract details..." required></textarea>
                </div>
                
                <div class="form-row">
                    <div class="form-group">
                        <label data-i18n="duration">Duration</label>
                        <input type="text" id="duration" placeholder="e.g., 2 Days Contract" required>
                    </div>
                    
                    <div class="form-group">
                        <label data-i18n="worker_id">Worker ID</label>
                        <input type="text" id="workerId" placeholder="e.g., wrk-012" required>
                    </div>
                </div>
                
                <div class="form-row">
                    <div class="form-group">
                        <label data-i18n="amount">Amount ()</label>
                        <input type="number" id="amount" placeholder="20000" required>
                    </div>
                    
                    <div class="form-group">
                        <label data-i18n="status">Status</label>
                        <select id="status" required>
                            <option value="Not Started" data-i18n="not_started">Not Started</option>
                            <option value="In Progress" data-i18n="in_progress">In Progress</option>
                            <option value="Completed" data-i18n="completed">Completed</option>
                        </select>
                    </div>
                </div>
                
                <div class="form-row">
                    <div class="form-group">
                        <label data-i18n="submission_date">Submission Date</label>
                        <input type="date" id="submissionDate" required>
                    </div>
                    
                    <div class="form-group">
                        <label data-i18n="submitted_by">Submitted By</label>
                        <input type="text" id="submittedBy" placeholder="Your name" required>
                    </div>
                </div>
                
                <!-- Phone Number Field -->
                <div class="form-group">
                    <label data-i18n="phone_number">Phone Number <span class="pin-badge">Hidden until unlocked</span></label>
                    <input type="tel" id="phoneNumber" placeholder="e.g., +234 123 456 7890" required>
                </div>
                
                <!-- Image Upload Section -->
                <div class="form-group">
                    <label data-i18n="contract_image">Contract Image</label>
                    <div class="image-upload-container" id="imageUploadContainer" onclick="document.getElementById('imageInput').click()" ondragover="handleDragOver(event)" ondragleave="handleDragLeave(event)" ondrop="handleDrop(event)">
                        <div class="upload-icon"></div>
                        <div class="upload-text" data-i18n="click_or_drag">Click or drag image to upload</div>
                        <div class="upload-hint" data-i18n="image_hint">Supports: JPG, PNG, GIF (Max 5MB)</div>
                        <input type="file" id="imageInput" accept="image/*" style="display: none;" onchange="handleImageSelect(event)">
                    </div>
                    <div class="image-preview" id="imagePreview">
                        <img src="" alt="Preview">
                    </div>
                </div>
                
                <div class="form-actions">
                    <button type="button" class="btn-cancel" onclick="closeAddModal()" data-i18n="cancel">Cancel</button>
                    <button type="submit" class="btn-submit" id="submitBtn" data-i18n="create_contract">Create Contract</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Contract Detail Modal (Updated to show location) -->
    <div class="modal" id="detailModal">
        <div class="modal-content" style="max-width: 700px;">
            <div class="modal-header">
                <h2 id="detailTitle">Contract Details</h2>
                <span class="close-btn" onclick="closeDetailModal()">&times;</span>
            </div>
            
            <div class="detail-grid" id="detailContent">
                <div class="loading-container">
                    <div class="neon-loading">
                        <div class="neon-dot"></div>
                        <div class="neon-dot"></div>
                        <div class="neon-dot"></div>
                        <div class="neon-dot"></div>
                        <div class="neon-dot"></div>
                    </div>
                </div>
            </div>

            <!-- View Contact Button & PIN Section -->
            <div style="margin: 20px 0; display: flex; justify-content: space-between; align-items: center;">
                <div>
                    <p data-i18n="clients_name">Client's Name: <span id="submittedByName" style="font-weight: 600;"></span></p>
                    <span class="pin-badge" id="pinsRemainingBadge" style="display: none;"></span>
                </div>
                <button class="btn-primary" id="viewContactBtn" onclick="openContactModal()" style="width: auto; padding: 10px 25px;" data-i18n="view_contact"> View Contact</button>
            </div>

            <div style="margin-top: 20px; display: flex; gap: 10px;">
                <button class="btn-secondary" onclick="closeDetailModal()" style="flex: 1;" data-i18n="close_detail">Close Contract Detail</button>
            </div>
        </div>
    </div>

    <!-- Contact Modal with PIN System -->
    <div class="modal" id="contactModal">
        <div class="modal-content" style="max-width: 500px;">
            <div class="modal-header">
                <h2 data-i18n="contact_information">Contact Information</h2>
                <span class="close-btn" onclick="closeContactModal()">&times;</span>
            </div>
            
            <div id="contactContent">
                <!-- Contact info will be loaded here -->
            </div>
            
            <div id="pinSection">
                <!-- PIN section will be dynamically loaded -->
            </div>
            
            <div id="emailSection" style="display: none;">
                <!-- Email section for free pins -->
            </div>
        </div>
    </div>

    <!-- Buy Pins Modal -->
    <div class="modal" id="buyPinsModal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 data-i18n="purchase_pins"> Purchase Pins</h2>
                <span class="close-btn" onclick="closeBuyPinsModal()">&times;</span>
            </div>
            
            <div class="pricing-grid">
                <div class="pricing-card" onclick="selectPinPackage(10)" id="package10">
                    <div class="pricing-quantity">10</div>
                    <div class="pricing-price">$10</div>
                    <div class="pricing-bonus" data-i18n="bonus_0">+0 bonus</div>
                </div>
                <div class="pricing-card" onclick="selectPinPackage(25)" id="package25">
                    <div class="pricing-quantity">25</div>
                    <div class="pricing-price">$20</div>
                    <div class="pricing-bonus" data-i18n="bonus_5">+5 bonus</div>
                </div>
                <div class="pricing-card" onclick="selectPinPackage(50)" id="package50">
                    <div class="pricing-quantity">50</div>
                    <div class="pricing-price">$35</div>
                    <div class="pricing-bonus" data-i18n="bonus_15">+15 bonus</div>
                </div>
            </div>
            
            <div class="email-section">
                <label data-i18n="email_address">Email Address</label>
                <div class="email-input-group">
                    <input type="email" id="purchaseEmail" placeholder="your@email.com" class="pin-input">
                    <button class="pin-button" onclick="processPurchase()" data-i18n="buy_now">Buy Now</button>
                </div>
            </div>
            
            <div class="divider">
                <span data-i18n="or">or</span>
            </div>
            
            <button class="pin-button secondary" style="width: 100%;" onclick="checkBalance()" data-i18n="check_balance">Check My Balance</button>
        </div>
    </div>

    <!-- All Contracts Modal -->
    <div class="modal" id="allContractsModal">
        <div class="modal-content" style="max-width: 800px;">
            <div class="modal-header">
                <h2 data-i18n="all_contracts"> All Contracts</h2>
                <span class="close-btn" onclick="closeAllContractsModal()">&times;</span>
            </div>
            <div class="all-contracts-list" id="allContractsList">
                <div class="loading-container">
                    <div class="neon-loading">
                        <div class="neon-dot"></div>
                        <div class="neon-dot"></div>
                        <div class="neon-dot"></div>
                        <div class="neon-dot"></div>
                        <div class="neon-dot"></div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Staff Detail Modal -->
    <div class="modal" id="staffDetailModal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 data-i18n="staff_profile">Staff Profile</h2>
                <span class="close-btn" onclick="closeStaffDetailModal()">&times;</span>
            </div>
            <div id="staffDetailContent">
                <div class="loading-container">
                    <div class="neon-loading">
                        <div class="neon-dot"></div>
                        <div class="neon-dot"></div>
                        <div class="neon-dot"></div>
                        <div class="neon-dot"></div>
                        <div class="neon-dot"></div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // ==================== CONFIGURATION ====================
        // URLs are now loaded from config.js
        const GOOGLE_SHEETS_API_URL = window.KRO_CONFIG.GOOGLE_SHEETS_API_URL;
        const YOUTUBE_CREATORS_API_URL = window.KRO_CONFIG.YOUTUBE_CREATORS_API_URL;
        const TOP_STAFF_API_URL = window.KRO_CONFIG.TOP_STAFF_API_URL;
        const HERO_IMAGE_API_URL = window.KRO_CONFIG.HERO_IMAGE_API_URL;
        const PIN_API_URL = window.KRO_CONFIG.PIN_API_URL;
        const ADMIN_API_URL = window.KRO_CONFIG.ADMIN_API_URL;
        const IMGBB_API_KEY = window.KRO_CONFIG.IMGBB_API_KEY;

        // Optional: Add a check to make sure config loaded
        if (!window.KRO_CONFIG || !window.KRO_CONFIG.PIN_API_URL) {
            console.error(' ERROR: Config file not loaded properly!');
            alert('Configuration error. Please refresh the page.');
        }
        
        // ==================== GLOBAL VARIABLES ====================
        let contracts = [];
        let youtubeCreators = [];
        let topStaff = [];
        let currentFilter = 'all';
        let currentCountryFilter = '';
        let currentCityFilter = '';
        let currentPage = 'home';
        let selectedContractId = null;
        let currentBannerIndex = 0;
        let bannerInterval;
        let selectedImageFile = null;
        let currentPhoneNumber = '';
        let currentContactName = '';
        let currentContractId = null;
        let userEmail = localStorage.getItem('kro_user_email') || '';
        let userPinsRemaining = 0;
        let selectedPinPackage = 10;
        const MAX_HOMEPAGE_CONTRACTS = 12;
        
        // ==================== LANGUAGE SUPPORT ====================
        let currentLanguage = localStorage.getItem('kro_language') || 'en';
        
        const translations = {
            en: {
                // Header
                home: "HOME",
                progress: "PROGRESS",
                get_free_pins: " Get Free Pins",
                
                // Hero
                hero_get: "GET K.R.O",
                hero_contracts: "CONTRACTS",
                hero_description: "K.R.O Contracts brings together colleagues to support each other. Create, track, and resolve support contracts in a secure, transparent environment.",
                
                // Stats
                active_users: "Active Users",
                completed_contracts: "Completed Contracts",
                total_support: "Total Support",
                
                // Buttons
                create_contract: "CREATE CONTRACT",
                view_progress: "VIEW PROGRESS",
                filter: "FILTER",
                categories: "CATEGORIES",
                create: "+ CREATE",
                
                // Mobile Actions
                actions: "Actions",
                
                // Timer
                current_date_time: "Current Date & Time",
                time: "Time",
                
                // Filters
                active_filters: "Active Filters:",
                clear_all: "Clear All",
                filter_by_status: "Filter by Status",
                all_contracts: " All Contracts",
                in_progress: " In Progress",
                completed: " Completed",
                not_started: " Not Started",
                done: "Done",
                
                // Category Modal
                browse_by_location: " Browse by Location",
                select_country: "Select Country",
                all_countries: "All Countries",
                select_city_state: "Select City/State",
                all_cities: "All Cities/States",
                city_note: "* Cities will update based on selected country",
                reset: "Reset",
                apply_filters: "Apply Filters",
                
                // Contract Cards
                at: "at",
                posted: "Posted",
                
                // Form
                title: "Title",
                company: "Company",
                country: "Country",
                city_state: "City/State",
                description: "Description",
                duration: "Duration",
                worker_id: "Worker ID",
                amount: "Amount ()",
                status: "Status",
                submission_date: "Submission Date",
                submitted_by: "Submitted By",
                phone_number: "Phone Number",
                contract_image: "Contract Image",
                click_or_drag: "Click or drag image to upload",
                image_hint: "Supports: JPG, PNG, GIF (Max 5MB)",
                cancel: "Cancel",
                
                // Modal Titles
                create_new_contract: "Create New Contract",
                contact_information: "Contact Information",
                purchase_pins: " Purchase Pins",
                all_contracts_title: " All Contracts",
                staff_profile: "Staff Profile",
                
                // PIN System
                clients_name: "Client's Name:",
                view_contact: " View Contact",
                close_detail: "Close Contract Detail",
                enter_pin: "Enter your email and PIN to unlock phone number",
                unlock: "Unlock Phone Number",
                pins_remaining: "pins remaining",
                buy_more: "Buy More Pins",
                
                // Purchase
                bonus_0: "+0 bonus",
                bonus_5: "+5 bonus",
                bonus_15: "+15 bonus",
                email_address: "Email Address",
                buy_now: "Buy Now",
                or: "or",
                check_balance: "Check My Balance",
                
                // Search
                search_placeholder: "Search contracts...",
                
                // Sections
                youtube_title: " K.R.O MOVIES",
                see_all: "See All ",
                active_contracts: "Active Contracts",
                see_all_contracts: "See All ",
                progress_report: "Progress Report",
                top_contracts: " Top 5 Highest Contracts",
                top_staff: " Top 5 Staff",
                today_highest: "Today's Highest Support",
                day: "Day",
                month: "Month",
                year: "Year",
                hour_min: "H:M",
                
                // Toast Messages
                please_enter_email: "Please enter your email",
                free_pins_sent: " 5 free pins sent to your email!",
                pin_validated: " PIN validated successfully!",
                invalid_pin: "Invalid PIN",
                contract_created: "Contract created successfully!",
                
                // Languages
                language_english: "English",
                language_spanish: "Espaol",
                language_french: "Franais",
                language_german: "Deutsch",
                language_portuguese: "Portugus",
                language_chinese: "",
                language_arabic: "",
                language_hindi: "",
                language_japanese: "",
                language_russian: ""
            },
            es: {
                // Header
                home: "INICIO",
                progress: "PROGRESO",
                get_free_pins: " Obtener Pines Gratis",
                
                // Hero
                hero_get: "OBTN K.R.O",
                hero_contracts: "CONTRATOS",
                hero_description: "K.R.O Contracts une a colegas para apoyarse mutuamente. Crea, rastrea y resuelve contratos de soporte en un entorno seguro y transparente.",
                
                // Stats
                active_users: "Usuarios Activos",
                completed_contracts: "Contratos Completados",
                total_support: "Soporte Total",
                
                // Buttons
                create_contract: "CREAR CONTRATO",
                view_progress: "VER PROGRESO",
                filter: "FILTRAR",
                categories: "CATEGORAS",
                create: "+ CREAR",
                
                // Mobile Actions
                actions: "Acciones",
                
                // Timer
                current_date_time: "Fecha y Hora Actual",
                time: "Hora",
                
                // Filters
                active_filters: "Filtros Activos:",
                clear_all: "Limpiar Todo",
                filter_by_status: "Filtrar por Estado",
                all_contracts: " Todos los Contratos",
                in_progress: " En Progreso",
                completed: " Completados",
                not_started: " No Iniciados",
                done: "Hecho",
                
                // Category Modal
                browse_by_location: " Explorar por Ubicacin",
                select_country: "Seleccionar Pas",
                all_countries: "Todos los Pases",
                select_city_state: "Seleccionar Ciudad/Estado",
                all_cities: "Todas las Ciudades/Estados",
                city_note: "* Las ciudades se actualizarn segn el pas seleccionado",
                reset: "Reiniciar",
                apply_filters: "Aplicar Filtros",
                
                // Contract Cards
                at: "en",
                posted: "Publicado",
                
                // Form
                title: "Ttulo",
                company: "Empresa",
                country: "Pas",
                city_state: "Ciudad/Estado",
                description: "Descripcin",
                duration: "Duracin",
                worker_id: "ID del Trabajador",
                amount: "Monto ()",
                status: "Estado",
                submission_date: "Fecha de Envo",
                submitted_by: "Enviado Por",
                phone_number: "Nmero de Telfono",
                contract_image: "Imagen del Contrato",
                click_or_drag: "Haz clic o arrastra una imagen",
                image_hint: "Soporta: JPG, PNG, GIF (Mx 5MB)",
                cancel: "Cancelar",
                
                // Modal Titles
                create_new_contract: "Crear Nuevo Contrato",
                contact_information: "Informacin de Contacto",
                purchase_pins: " Comprar Pines",
                all_contracts_title: " Todos los Contratos",
                staff_profile: "Perfil del Personal",
                
                // PIN System
                clients_name: "Nombre del Cliente:",
                view_contact: " Ver Contacto",
                close_detail: "Cerrar Detalle del Contrato",
                enter_pin: "Ingresa tu email y PIN para desbloquear",
                unlock: "Desbloquear Telfono",
                pins_remaining: "pines restantes",
                buy_more: "Comprar Ms Pines",
                
                // Purchase
                bonus_0: "+0 bonificacin",
                bonus_5: "+5 bonificacin",
                bonus_15: "+15 bonificacin",
                email_address: "Correo Electrnico",
                buy_now: "Comprar Ahora",
                or: "o",
                check_balance: "Ver Mi Saldo",
                
                // Search
                search_placeholder: "Buscar contratos...",
                
                // Sections
                youtube_title: " PELCULAS K.R.O",
                see_all: "Ver Todo ",
                active_contracts: "Contratos Activos",
                see_all_contracts: "Ver Todo ",
                progress_report: "Informe de Progreso",
                top_contracts: " Top 5 Contratos Ms Altos",
                top_staff: " Top 5 Personal",
                today_highest: "Soporte Ms Alto Hoy",
                day: "Da",
                month: "Mes",
                year: "Ao",
                hour_min: "H:M",
                
                // Toast Messages
                please_enter_email: "Por favor ingresa tu email",
                free_pins_sent: " 5 pines gratis enviados a tu email!",
                pin_validated: " PIN validado exitosamente!",
                invalid_pin: "PIN invlido",
                contract_created: "Contrato creado exitosamente!",
                
                // Languages
                language_english: "English",
                language_spanish: "Espaol",
                language_french: "Franais",
                language_german: "Deutsch",
                language_portuguese: "Portugus",
                language_chinese: "",
                language_arabic: "",
                language_hindi: "",
                language_japanese: "",
                language_russian: ""
            },
            fr: {
                // Header
                home: "ACCUEIL",
                progress: "PROGRS",
                get_free_pins: " Obtenir des Pins Gratuits",
                
                // Hero
                hero_get: "OBTENEZ K.R.O",
                hero_contracts: "CONTRATS",
                hero_description: "K.R.O Contracts rassemble des collgues pour s'entraider. Crez, suivez et rsolvez des contrats de support dans un environnement scuris et transparent.",
                
                // Stats
                active_users: "Utilisateurs Actifs",
                completed_contracts: "Contrats Termins",
                total_support: "Support Total",
                
                // Buttons
                create_contract: "CRER UN CONTRAT",
                view_progress: "VOIR PROGRS",
                filter: "FILTRER",
                categories: "CATGORIES",
                create: "+ CRER",
                
                // Mobile Actions
                actions: "Actions",
                
                // Timer
                current_date_time: "Date et Heure Actuelles",
                time: "Heure",
                
                // Filters
                active_filters: "Filtres Actifs:",
                clear_all: "Tout Effacer",
                filter_by_status: "Filtrer par Statut",
                all_contracts: " Tous les Contrats",
                in_progress: " En Cours",
                completed: " Termins",
                not_started: " Non Dmarrs",
                done: "Termin",
                
                // Category Modal
                browse_by_location: " Parcourir par Lieu",
                select_country: "Slectionner un Pays",
                all_countries: "Tous les Pays",
                select_city_state: "Slectionner une Ville/tat",
                all_cities: "Toutes les Villes/tats",
                city_note: "* Les villes seront mises  jour selon le pays slectionn",
                reset: "Rinitialiser",
                apply_filters: "Appliquer les Filtres",
                
                // Contract Cards
                at: "",
                posted: "Publi",
                
                // Form
                title: "Titre",
                company: "Entreprise",
                country: "Pays",
                city_state: "Ville/tat",
                description: "Description",
                duration: "Dure",
                worker_id: "ID du Travailleur",
                amount: "Montant ()",
                status: "Statut",
                submission_date: "Date de Soumission",
                submitted_by: "Soumis Par",
                phone_number: "Numro de Tlphone",
                contract_image: "Image du Contrat",
                click_or_drag: "Cliquez ou glissez une image",
                image_hint: "Supporte: JPG, PNG, GIF (Max 5MB)",
                cancel: "Annuler",
                
                // Modal Titles
                create_new_contract: "Crer un Nouveau Contrat",
                contact_information: "Informations de Contact",
                purchase_pins: " Acheter des Pins",
                all_contracts_title: " Tous les Contrats",
                staff_profile: "Profil du Personnel",
                
                // PIN System
                clients_name: "Nom du Client:",
                view_contact: " Voir Contact",
                close_detail: "Fermer les Dtails",
                enter_pin: "Entrez votre email et PIN pour dbloquer",
                unlock: "Dbloquer le Tlphone",
                pins_remaining: "pins restants",
                buy_more: "Acheter Plus de Pins",
                
                // Purchase
                bonus_0: "+0 bonus",
                bonus_5: "+5 bonus",
                bonus_15: "+15 bonus",
                email_address: "Adresse Email",
                buy_now: "Acheter Maintenant",
                or: "ou",
                check_balance: "Voir Mon Solde",
                
                // Search
                search_placeholder: "Rechercher des contrats...",
                
                // Sections
                youtube_title: " FILMS K.R.O",
                see_all: "Voir Tout ",
                active_contracts: "Contrats Actifs",
                see_all_contracts: "Voir Tout ",
                progress_report: "Rapport de Progrs",
                top_contracts: " Top 5 Plus Hauts Contrats",
                top_staff: " Top 5 Personnel",
                today_highest: "Support le Plus lev Aujourd'hui",
                day: "Jour",
                month: "Mois",
                year: "Anne",
                hour_min: "H:M",
                
                // Toast Messages
                please_enter_email: "Veuillez entrer votre email",
                free_pins_sent: " 5 pins gratuits envoys  votre email!",
                pin_validated: " PIN valid avec succs!",
                invalid_pin: "PIN invalide",
                contract_created: "Contrat cr avec succs!",
                
                // Languages
                language_english: "English",
                language_spanish: "Espaol",
                language_french: "Franais",
                language_german: "Deutsch",
                language_portuguese: "Portugus",
                language_chinese: "",
                language_arabic: "",
                language_hindi: "",
                language_japanese: "",
                language_russian: ""
            }
            // Add more languages as needed (de, pt, zh, ar, hi, ja, ru)
        };

        // Initialize translations for other languages with English as fallback
        const additionalLanguages = ['de', 'pt', 'zh', 'ar', 'hi', 'ja', 'ru'];
        additionalLanguages.forEach(lang => {
            if (!translations[lang]) {
                translations[lang] = { ...translations.en };
                // You can customize specific translations later
            }
        });

        // ==================== LIVE CLOCK FUNCTION ====================
        function updateLiveClock() {
            const now = new Date();
            
            // Get date components
            const day = now.getDate().toString().padStart(2, '0');
            const month = (now.getMonth() + 1).toString().padStart(2, '0');
            const year = now.getFullYear();
            
            // Get time components
            const hours = now.getHours().toString().padStart(2, '0');
            const minutes = now.getMinutes().toString().padStart(2, '0');
            const seconds = now.getSeconds().toString().padStart(2, '0');
            const timeString = `${hours}:${minutes}:${seconds}`;
            
            // Update DOM elements
            document.getElementById('currentDay').textContent = day;
            document.getElementById('currentMonth').textContent = month;
            document.getElementById('currentYear').textContent = year;
            document.getElementById('currentTime').textContent = timeString;
            
            // Get and display timezone
            const timezone = Intl.DateTimeFormat().resolvedOptions().timeZone;
            const timezoneOffset = -now.getTimezoneOffset();
            const offsetHours = Math.floor(Math.abs(timezoneOffset) / 60);
            const offsetMinutes = Math.abs(timezoneOffset) % 60;
            const offsetSign = timezoneOffset >= 0 ? '+' : '-';
            const offsetString = `UTC${offsetSign}${offsetHours.toString().padStart(2, '0')}:${offsetMinutes.toString().padStart(2, '0')}`;
            
            const timezoneDisplay = document.getElementById('timezoneDisplay');
            if (timezoneDisplay) {
                timezoneDisplay.innerHTML = `${timezone} (${offsetString})`;
            }
        }

        // Start the clock immediately and update every second
        let clockInterval;
        
        function startLiveClock() {
            updateLiveClock(); // Update immediately
            if (clockInterval) clearInterval(clockInterval);
            clockInterval = setInterval(updateLiveClock, 1000); // Update every second
        }

        // Stop the clock when needed (optional)
        function stopLiveClock() {
            if (clockInterval) {
                clearInterval(clockInterval);
                clockInterval = null;
            }
        }

        // ==================== MOBILE ACTIONS TOGGLE ====================
        function toggleMobileActions() {
            const actionButtons = document.getElementById('mobileActionButtons');
            const arrow = document.getElementById('mobileActionArrow');
            
            actionButtons.classList.toggle('show');
            arrow.classList.toggle('open');
        }

        function toggleLanguageDropdown() {
            const dropdown = document.getElementById('langDropdown');
            dropdown.classList.toggle('show');
        }

        function changeLanguage(lang) {
            currentLanguage = lang;
            localStorage.setItem('kro_language', lang);
            
            // Update active state in dropdown
            document.querySelectorAll('.lang-option').forEach(opt => {
                opt.classList.remove('active');
                if (opt.getAttribute('onclick')?.includes(`'${lang}'`)) {
                    opt.classList.add('active');
                }
            });
            
            // Update mobile active state
            document.querySelectorAll('.mobile-lang-option').forEach(opt => {
                opt.classList.remove('active');
                if (opt.getAttribute('onclick')?.includes(`'${lang}'`)) {
                    opt.classList.add('active');
                }
            });
            
            // Update displayed language
            document.getElementById('selectedLang').textContent = translations[lang]?.language_english || 'English';
            
            // Close dropdown
            document.getElementById('langDropdown').classList.remove('show');
            
            // Translate all elements with data-i18n attribute
            translatePage();
            
            // Update the clock (to refresh timezone display with new language)
            updateLiveClock();
            
            // Show toast
            showToast(`Language changed to ${translations[lang]?.language_english || 'English'}`, 'success');
        }

        function translatePage() {
            document.querySelectorAll('[data-i18n]').forEach(element => {
                const key = element.getAttribute('data-i18n');
                if (translations[currentLanguage] && translations[currentLanguage][key]) {
                    if (element.tagName === 'INPUT' || element.tagName === 'TEXTAREA') {
                        element.placeholder = translations[currentLanguage][key];
                    } else {
                        element.textContent = translations[currentLanguage][key];
                    }
                }
            });
            
            // Update placeholders
            document.querySelectorAll('[data-i18n-placeholder]').forEach(element => {
                const key = element.getAttribute('data-i18n-placeholder');
                if (translations[currentLanguage] && translations[currentLanguage][key]) {
                    element.placeholder = translations[currentLanguage][key];
                }
            });
        }

        // Close language dropdown when clicking outside
        window.addEventListener('click', function(event) {
            const dropdown = document.getElementById('langDropdown');
            const langBtn = document.querySelector('.lang-btn');
            if (!langBtn?.contains(event.target) && !dropdown?.contains(event.target)) {
                dropdown?.classList.remove('show');
            }
        });

        // ==================== CATEGORY FILTER FUNCTIONS ====================
        function openCategoryModal() {
            document.getElementById('categoryModal').style.display = 'flex';
            populateCityDropdown();
        }

        function closeCategoryModal() {
            document.getElementById('categoryModal').style.display = 'none';
        }

        function populateCityDropdown() {
            const country = document.getElementById('countryFilter').value;
            const citySelect = document.getElementById('cityFilter');
            
            // Clear existing options except "All Cities"
            citySelect.innerHTML = '<option value="" data-i18n="all_cities">All Cities/States</option>';
            
            if (!country) {
                return;
            }
            
            // Get unique cities from contracts for the selected country
            const cities = [...new Set(contracts
                .filter(c => c.country === country && c.city)
                .map(c => c.city)
            )].sort();
            
            cities.forEach(city => {
                const option = document.createElement('option');
                option.value = city;
                option.textContent = city;
                citySelect.appendChild(option);
            });
            
            // Translate the "All Cities" option
            if (translations[currentLanguage]) {
                citySelect.options[0].textContent = translations[currentLanguage].all_cities;
            }
        }

        // Update city dropdown when country changes
        document.getElementById('countryFilter')?.addEventListener('change', populateCityDropdown);

        function applyCategoryFilters() {
            currentCountryFilter = document.getElementById('countryFilter').value;
            currentCityFilter = document.getElementById('cityFilter').value;
            
            // Update active filters bar
            updateActiveFiltersBar();
            
            // Apply filters and close modal
            filterAndDisplayContracts();
            closeCategoryModal();
        }

        function resetCategoryFilters() {
            document.getElementById('countryFilter').value = '';
            document.getElementById('cityFilter').innerHTML = '<option value="" data-i18n="all_cities">All Cities/States</option>';
            if (translations[currentLanguage]) {
                document.getElementById('cityFilter').options[0].textContent = translations[currentLanguage].all_cities;
            }
        }

        function updateActiveFiltersBar() {
            const bar = document.getElementById('activeFiltersBar');
            const countryTag = document.getElementById('countryFilterTag');
            const cityTag = document.getElementById('cityFilterTag');
            const countryDisplay = document.getElementById('selectedCountryDisplay');
            const cityDisplay = document.getElementById('selectedCityDisplay');
            
            let hasFilters = false;
            
            if (currentCountryFilter) {
                countryDisplay.textContent = currentCountryFilter;
                countryTag.style.display = 'inline-flex';
                hasFilters = true;
            } else {
                countryTag.style.display = 'none';
            }
            
            if (currentCityFilter) {
                cityDisplay.textContent = currentCityFilter;
                cityTag.style.display = 'inline-flex';
                hasFilters = true;
            } else {
                cityTag.style.display = 'none';
            }
            
            bar.style.display = hasFilters ? 'flex' : 'none';
        }

        function removeFilter(type) {
            if (type === 'country') {
                currentCountryFilter = '';
                document.getElementById('countryFilter').value = '';
                // Also clear city since it depends on country
                currentCityFilter = '';
                document.getElementById('cityFilter').innerHTML = '<option value="" data-i18n="all_cities">All Cities/States</option>';
                if (translations[currentLanguage]) {
                    document.getElementById('cityFilter').options[0].textContent = translations[currentLanguage].all_cities;
                }
            } else if (type === 'city') {
                currentCityFilter = '';
                document.getElementById('cityFilter').value = '';
            }
            
            updateActiveFiltersBar();
            filterAndDisplayContracts();
        }

        function clearAllFilters() {
            currentCountryFilter = '';
            currentCityFilter = '';
            document.getElementById('countryFilter').value = '';
            document.getElementById('cityFilter').innerHTML = '<option value="" data-i18n="all_cities">All Cities/States</option>';
            if (translations[currentLanguage]) {
                document.getElementById('cityFilter').options[0].textContent = translations[currentLanguage].all_cities;
            }
            updateActiveFiltersBar();
            filterAndDisplayContracts();
        }

        function filterAndDisplayContracts() {
            // This will be called from updateDisplay
            displayContracts();
            displayProgress();
        }

        // Override filterContracts function to include location filters
        const originalFilterContracts = filterContracts;
        filterContracts = function(contractsList) {
            let filtered = originalFilterContracts(contractsList);
            
            // Apply country filter
            if (currentCountryFilter) {
                filtered = filtered.filter(c => c.country === currentCountryFilter);
            }
            
            // Apply city filter
            if (currentCityFilter) {
                filtered = filtered.filter(c => c.city === currentCityFilter);
            }
            
            return filtered;
        };

        // ==================== TOAST NOTIFICATION SYSTEM ====================
        function showToast(message, type = 'info', duration = 3000) {
            const container = document.getElementById('toastContainer');
            const toast = document.createElement('div');
            toast.className = `toast ${type}`;
            toast.textContent = message;
            container.appendChild(toast);
            
            // Trigger animation
            setTimeout(() => toast.classList.add('show'), 10);
            
            // Remove after duration
            setTimeout(() => {
                toast.classList.remove('show');
                setTimeout(() => toast.remove(), 300);
            }, duration);
        }

        // ==================== MOBILE MENU FUNCTIONS ====================
        function toggleMobileMenu() {
            const menuToggle = document.querySelector('.menu-toggle');
            const mobileMenu = document.getElementById('mobileMenu');
            
            menuToggle.classList.toggle('active');
            mobileMenu.classList.toggle('active');
            
            // Prevent scrolling when menu is open
            if (mobileMenu.classList.contains('active')) {
                document.body.style.overflow = 'hidden';
            } else {
                document.body.style.overflow = '';
            }
        }

        function showMobilePage(page) {
            // Close mobile menu
            toggleMobileMenu();
            
            // Call the original showPage function
            showPage(page);
            
            // Update active states for mobile buttons
            document.querySelectorAll('.mobile-nav-btn').forEach(btn => btn.classList.remove('active'));
            if (page === 'home') {
                document.querySelector('.mobile-nav-btn').classList.add('active');
            } else {
                document.querySelectorAll('.mobile-nav-btn')[1].classList.add('active');
            }
        }

        // ==================== HELPER: SHOW LOADING ON BUTTON ====================
        function setButtonLoading(button, isLoading) {
            if (isLoading) {
                button.classList.add('loading');
                button.disabled = true;
            } else {
                button.classList.remove('loading');
                button.disabled = false;
            }
        }

        // ==================== FREE PIN MODAL FUNCTIONS ====================
        function openFreePinModal() {
            // Close mobile menu if open
            const mobileMenu = document.getElementById('mobileMenu');
            if (mobileMenu.classList.contains('active')) {
                toggleMobileMenu();
            }
            
            // Close any open modals first
            const modals = ['filterModal', 'addModal', 'detailModal', 'staffDetailModal', 'allContractsModal', 'contactModal', 'buyPinsModal', 'categoryModal'];
            modals.forEach(modalId => {
                const modal = document.getElementById(modalId);
                if (modal) modal.style.display = 'none';
            });
            
            // Create and show free pin modal
            const modal = document.createElement('div');
            modal.className = 'modal';
            modal.id = 'freePinModal';
            modal.style.display = 'flex';
            
            modal.innerHTML = `
                <div class="modal-content" style="max-width: 450px;">
                    <div class="modal-header">
                        <h2 data-i18n="get_free_pins"> Get 5 Free Pins</h2>
                        <span class="close-btn" onclick="closeFreePinModal()">&times;</span>
                    </div>
                    <div style="text-align: center; margin: 20px 0;">
                        <div style="font-size: 4em; margin-bottom: 20px;"></div>
                        <p style="color: #a4ff7c; font-size: 1.2em; margin-bottom: 15px;" data-i18n="free_pins_message">New users get 5 free pins!</p>
                        <p style="color: #b0b0b0; margin-bottom: 25px;" data-i18n="free_pins_description">Enter your email to receive 5 PINs instantly. Each PIN unlocks one phone number.</p>
                    </div>
                    <div class="email-section" style="background: rgba(164,255,124,0.05); border: 1px solid #a4ff7c;">
                        <div class="email-input-group">
                            <input type="email" id="freePinModalEmail" placeholder="your@email.com" class="pin-input" style="border-color: #a4ff7c;">
                            <button class="pin-button" onclick="requestFreePinsFromModal()" style="background: linear-gradient(135deg, #a4ff7c, #4d9eff); color: #0a0a0f; font-weight: bold;" data-i18n="get_free_pins">Get Free Pins</button>
                        </div>
                    </div>
                    <div style="text-align: center; margin-top: 20px;">
                        <p style="color: #666; font-size: 0.9em;" data-i18n="already_have_account">Already have an account? <a href="#" onclick="switchToPinLogin()" style="color: #ff3b9c;" data-i18n="use_pin">Use PIN</a></p>
                    </div>
                </div>
            `;
            
            document.body.appendChild(modal);
            translatePage(); // Translate the new modal
        }

        function closeFreePinModal() {
            const modal = document.getElementById('freePinModal');
            if (modal) modal.remove();
        }

        function switchToPinLogin() {
            closeFreePinModal();
            openContactModal();
        }

        async function requestFreePinsFromModal() {
            const email = document.getElementById('freePinModalEmail').value;
            if (!email) {
                showToast(translations[currentLanguage]?.please_enter_email || 'Please enter your email', 'error');
                return;
            }
            
            const button = event.target;
            setButtonLoading(button, true);
            
            try {
                const response = await fetch(`${PIN_API_URL}?action=generateFreePins&email=${encodeURIComponent(email)}`);
                
                if (!response.ok) {
                    throw new Error('Network response was not ok');
                }
                
                const result = await response.json();
                
                if (result.success) {
                    showToast(translations[currentLanguage]?.free_pins_sent || ' 5 free pins sent to your email!', 'success');
                    userEmail = email;
                    localStorage.setItem('kro_user_email', email);
                    await checkPinBalance(email);
                    closeFreePinModal();
                } else {
                    showToast(` ${result.error || (translations[currentLanguage]?.failed_to_get_pins || 'Failed to get free pins')}`, 'error');
                }
            } catch (error) {
                console.error('Error getting free pins:', error);
                showToast(translations[currentLanguage]?.error_requesting_pins || 'Error requesting free pins. Please try again.', 'error');
            } finally {
                setButtonLoading(button, false);
            }
        }

        // ==================== PIN SYSTEM FUNCTIONS ====================
        async function checkPinBalance(email) {
            try {
                const response = await fetch(`${PIN_API_URL}?action=checkBalance&email=${encodeURIComponent(email)}`);
                
                if (!response.ok) {
                    throw new Error('Network response was not ok');
                }
                
                const result = await response.json();
                
                if (result.success) {
                    userPinsRemaining = result.pinsRemaining || 0;
                    updatePinsBadge();
                    return result;
                } else {
                    userPinsRemaining = 0;
                    updatePinsBadge();
                    return null;
                }
            } catch (error) {
                console.error('Error checking pin balance:', error);
                userPinsRemaining = 0;
                updatePinsBadge();
                return null;
            }
        }

        function updatePinsBadge() {
            const badge = document.getElementById('pinsRemainingBadge');
            if (badge) {
                if (userPinsRemaining > 0) {
                    badge.textContent = `${userPinsRemaining} ${translations[currentLanguage]?.pins_remaining || 'pins left'}`;
                    badge.style.display = 'inline-block';
                } else {
                    badge.style.display = 'none';
                }
            }
        }

        async function getFreePins(email) {
            if (!email) {
                showToast(translations[currentLanguage]?.please_enter_email || 'Please enter your email', 'error');
                return;
            }
            
            const button = event.target;
            setButtonLoading(button, true);
            
            try {
                const response = await fetch(`${PIN_API_URL}?action=generateFreePins&email=${encodeURIComponent(email)}`);
                
                if (!response.ok) {
                    throw new Error('Network response was not ok');
                }
                
                const result = await response.json();
                
                if (result.success) {
                    showToast(translations[currentLanguage]?.free_pins_sent || ' 5 free pins sent to your email!', 'success');
                    userEmail = email;
                    localStorage.setItem('kro_user_email', email);
                    await checkPinBalance(email);
                    closeContactModal();
                } else {
                    showToast(` ${result.error || (translations[currentLanguage]?.failed_to_get_pins || 'Failed to get free pins')}`, 'error');
                }
            } catch (error) {
                console.error('Error getting free pins:', error);
                showToast(translations[currentLanguage]?.error_requesting_pins || 'Error requesting free pins. Please try again.', 'error');
            } finally {
                setButtonLoading(button, false);
            }
        }

        async function validatePin(email, pin) {
            if (!email) {
                showToast(translations[currentLanguage]?.please_enter_email || 'Please enter your email', 'error');
                return false;
            }
            
            if (!pin || pin.length !== 6) {
                showToast(translations[currentLanguage]?.enter_valid_pin || 'Please enter a valid 6-digit PIN', 'error');
                return false;
            }
            
            const button = document.querySelector('#pinSection .pin-button');
            if (button) setButtonLoading(button, true);
            
            try {
                const response = await fetch(`${PIN_API_URL}?action=validatePin&email=${encodeURIComponent(email)}&pin=${pin}`);
                
                if (!response.ok) {
                    throw new Error('Network response was not ok');
                }
                
                const result = await response.json();
                
                if (result.success) {
                    userEmail = email;
                    localStorage.setItem('kro_user_email', email);
                    userPinsRemaining = result.pinsRemaining || 0;
                    updatePinsBadge();
                    showToast(translations[currentLanguage]?.pin_validated || ' PIN validated successfully!', 'success');
                    return true;
                } else {
                    showToast(result.error || (translations[currentLanguage]?.invalid_pin || 'Invalid PIN'), 'error');
                    return false;
                }
            } catch (error) {
                console.error('Error validating pin:', error);
                showToast(translations[currentLanguage]?.error_validating_pin || 'Error validating pin. Please try again.', 'error');
                return false;
            } finally {
                if (button) setButtonLoading(button, false);
            }
        }

        function selectPinPackage(quantity) {
            selectedPinPackage = quantity;
            document.querySelectorAll('.pricing-card').forEach(card => card.classList.remove('selected'));
            const packageElement = document.getElementById(`package${quantity}`);
            if (packageElement) packageElement.classList.add('selected');
        }

        async function processPurchase() {
            const email = document.getElementById('purchaseEmail').value;
            if (!email) {
                showToast(translations[currentLanguage]?.please_enter_email || 'Please enter your email', 'error');
                return;
            }
            
            const button = event.target;
            setButtonLoading(button, true);
            
            // Get amount based on selected package
            let amount = '$10';
            if (selectedPinPackage === 25) amount = '$20';
            if (selectedPinPackage === 50) amount = '$35';
            
            try {
                const response = await fetch(`${ADMIN_API_URL}?action=createPinRequest&email=${encodeURIComponent(email)}&package=${selectedPinPackage}&amount=${encodeURIComponent(amount)}`);
                
                if (!response.ok) {
                    throw new Error('Network response was not ok');
                }
                
                const result = await response.json();
                
                if (result.success) {
                    showToast(` ${result.message}`, 'success');
                    closeBuyPinsModal();
                } else {
                    showToast(` ${result.error || (translations[currentLanguage]?.purchase_failed || 'Purchase failed')}`, 'error');
                }
            } catch (error) {
                console.error('Error:', error);
                showToast(translations[currentLanguage]?.error_submitting_request || 'Error submitting request. Please try again.', 'error');
            } finally {
                setButtonLoading(button, false);
            }
        }

        async function checkBalance() {
            const email = document.getElementById('purchaseEmail').value;
            if (!email) {
                showToast(translations[currentLanguage]?.please_enter_email || 'Please enter your email', 'error');
                return;
            }
            
            const button = event.target;
            setButtonLoading(button, true);
            
            const result = await checkPinBalance(email);
            if (result) {
                showToast(` You have ${result.pinsRemaining} ${translations[currentLanguage]?.pins_remaining || 'pins remaining'}`, 'info');
            } else {
                showToast(translations[currentLanguage]?.email_not_found || 'Email not found or error checking balance', 'error');
            }
            
            setButtonLoading(button, false);
        }

        // ==================== CONTACT MODAL FUNCTIONS ====================
        function openContactModal() {
            const modal = document.getElementById('contactModal');
            const content = document.getElementById('contactContent');
            const pinSection = document.getElementById('pinSection');
            const emailSection = document.getElementById('emailSection');
            
            if (!currentPhoneNumber) {
                currentPhoneNumber = '+234 123 456 7890';
            }
            
            if (!currentContactName) {
                currentContactName = 'Client';
            }
            
            // Show locked phone number
            content.innerHTML = `
                <div style="text-align: center; margin-bottom: 20px;">
                    <div style="font-size: 3em; margin-bottom: 10px;"></div>
                    <h3>${currentContactName}</h3>
                    <div style="margin: 20px 0;">
                        <div class="phone-locked"> ${currentPhoneNumber.replace(/\d(?=\d{4})/g, '*')}</div>
                        <p style="color: #b0b0b0; margin-top: 10px;" data-i18n="enter_pin">Enter your email and PIN to unlock phone number</p>
                    </div>
                </div>
            `;
            
            // Show email and PIN input
            pinSection.innerHTML = `
                <div class="pin-input-group">
                    <input type="email" id="contactEmail" class="pin-input" placeholder="${translations[currentLanguage]?.email_address || 'Enter your email'}" value="${userEmail || ''}">
                    <input type="text" class="pin-input" id="pinInput" placeholder="${translations[currentLanguage]?.enter_pin_placeholder || 'Enter 6-digit PIN'}" maxlength="6">
                    <button class="pin-button" onclick="unlockPhoneNumber()" data-i18n="unlock">Unlock Phone Number</button>
                </div>
                <div style="display: flex; justify-content: space-between; align-items: center; margin-top: 15px;">
                    <span class="pins-remaining">${userPinsRemaining} ${translations[currentLanguage]?.pins_remaining || 'pins remaining'}</span>
                    <button class="pin-button secondary" onclick="openBuyPinsModal()" data-i18n="buy_more">Buy More Pins</button>
                </div>
            `;
            emailSection.style.display = 'none';
            
            modal.style.display = 'flex';
            translatePage(); // Translate the modal content
        }

        async function unlockPhoneNumber() {
            const email = document.getElementById('contactEmail').value;
            const pin = document.getElementById('pinInput').value;
            
            const isValid = await validatePin(email, pin);
            
            if (isValid) {
                // Show unlocked phone number with call button
                document.getElementById('contactContent').innerHTML = `
                    <div style="text-align: center; margin-bottom: 20px;">
                        <div style="font-size: 3em; margin-bottom: 10px;"></div>
                        <h3>${currentContactName}</h3>
                        <div style="margin: 20px 0;">
                            <div style="font-size: 1.5em; color: #a4ff7c;"> ${currentPhoneNumber}</div>
                            <a href="tel:${currentPhoneNumber}" class="call-button" data-i18n="call_now">
                                 Call Now
                            </a>
                        </div>
                        <p style="color: #b0b0b0; margin-top: 10px;">${userPinsRemaining} ${translations[currentLanguage]?.pins_remaining || 'pins remaining'}</p>
                    </div>
                `;
                document.getElementById('pinSection').innerHTML = '';
                document.getElementById('emailSection').style.display = 'none';
                translatePage(); // Translate the new content
            }
        }

        function closeContactModal() {
            document.getElementById('contactModal').style.display = 'none';
        }

        function openBuyPinsModal() {
            document.getElementById('buyPinsModal').style.display = 'flex';
            // Reset selection
            selectPinPackage(10);
            translatePage(); // Translate the modal
        }

        function closeBuyPinsModal() {
            document.getElementById('buyPinsModal').style.display = 'none';
        }

        // ==================== CONTRACT FUNCTIONS ====================
        async function saveNewContract(event) {
            event.preventDefault();
            
            const submitBtn = document.getElementById('submitBtn');
            const originalText = submitBtn.textContent;
            setButtonLoading(submitBtn, true);
            
            document.getElementById('formMessage').innerHTML = '';
            
            try {
                let imageUrl = '';
                
                if (selectedImageFile) {
                    document.getElementById('formMessage').innerHTML = `
                        <div class="success-message" data-i18n="uploading_image"> Uploading image...</div>
                    `;
                    translatePage();
                    imageUrl = await uploadToImgbb(selectedImageFile);
                    if (!imageUrl) {
                        showToast(translations[currentLanguage]?.image_upload_failed || 'Image upload failed, but contract will be saved without image', 'warning');
                    }
                }
                
                const newContract = {
                    title: document.getElementById('title').value,
                    company: document.getElementById('company').value,
                    country: document.getElementById('country').value,
                    city: document.getElementById('city').value,
                    description: document.getElementById('description').value,
                    duration: document.getElementById('duration').value,
                    workerId: document.getElementById('workerId').value,
                    amount: document.getElementById('amount').value,
                    status: document.getElementById('status').value,
                    submissionDate: document.getElementById('submissionDate').value,
                    submittedBy: document.getElementById('submittedBy').value,
                    phoneNumber: document.getElementById('phoneNumber').value,
                    image_url: imageUrl || '',
                    avatar: `https://api.dicebear.com/7.x/avataaars/svg?seed=${document.getElementById('submittedBy').value}`
                };
                
                document.getElementById('formMessage').innerHTML = `
                    <div class="success-message" data-i18n="saving_contract"> Saving contract...</div>
                `;
                translatePage();
                
                // Using no-cors mode - we won't get a response but the data still sends
                await fetch(GOOGLE_SHEETS_API_URL, {
                    method: 'POST',
                    mode: 'no-cors',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(newContract)
                });
                
                document.getElementById('formMessage').innerHTML = `
                    <div class="success-message" data-i18n="contract_created"> Contract created successfully! Refreshing data...</div>
                `;
                translatePage();
                
                document.getElementById('addContractForm').reset();
                document.getElementById('imagePreview').style.display = 'none';
                selectedImageFile = null;
                
                const today = new Date().toISOString().split('T')[0];
                document.getElementById('submissionDate').value = today;
                
                showToast(translations[currentLanguage]?.contract_created || 'Contract created successfully!', 'success');
                
                setTimeout(() => {
                    loadContracts();
                    closeAddModal();
                }, 1500);
                
            } catch (error) {
                console.error('Error:', error);
                document.getElementById('formMessage').innerHTML = `
                    <div class="error-message" data-i18n="error_creating_contract"> Error creating contract. Please try again.</div>
                `;
                translatePage();
                showToast(translations[currentLanguage]?.error_creating_contract || 'Error creating contract', 'error');
            } finally {
                setButtonLoading(submitBtn, false);
            }
        }

        function viewContract(id) {
            selectedContractId = id;
            const contract = contracts.find(c => c.id == id);
            
            if (!contract) return;
            
            currentPhoneNumber = contract.phoneNumber || '+234 123 456 7890';
            currentContactName = contract.submittedBy || 'Client';
            currentContractId = id;
            
            document.getElementById('detailTitle').textContent = contract.title || 'Contract Details';
            document.getElementById('submittedByName').textContent = contract.submittedBy || 'Unknown';
            
            document.getElementById('detailContent').innerHTML = `
                <div class="detail-image">
                    <img src="${contract.image_url || 'https://via.placeholder.com/600x300/1a1a1a/ff3b9c?text=No+Image'}" alt="${contract.title || 'Contract'}" onerror="this.src='https://via.placeholder.com/600x300/1a1a1a/ff3b9c?text=Image+Not+Found'">
                </div>
                <div class="detail-row">
                    <div class="detail-label" data-i18n="description">Description</div>
                    <div class="detail-value">${contract.description || 'No description'}</div>
                </div>
                <div class="detail-row">
                    <div class="detail-label" data-i18n="location">Location</div>
                    <div class="detail-value">${contract.country || ''} ${contract.city ? ' ' + contract.city : ''}</div>
                </div>
                <div class="detail-row">
                    <div class="detail-label" data-i18n="duration">Duration</div>
                    <div class="detail-value">${contract.duration || 'N/A'}</div>
                </div>
                <div class="detail-row">
                    <div class="detail-label" data-i18n="worker_id">Worker ID</div>
                    <div class="detail-value">${contract.workerId || 'N/A'}</div>
                </div>
                <div class="detail-row">
                    <div class="detail-label" data-i18n="status">Status</div>
                    <div class="detail-value">
                        <span class="status-badge ${contract.status ? contract.status.toLowerCase().replace(' ', '-') : 'not-started'}">${contract.status || 'Not Started'}</span>
                    </div>
                </div>
                <div class="detail-row">
                    <div class="detail-label" data-i18n="amount">Amount</div>
                    <div class="detail-value">${contract.amount ? parseFloat(contract.amount).toLocaleString() : '0'}</div>
                </div>
                <div class="detail-row">
                    <div class="detail-label" data-i18n="submission_date">Submission Date</div>
                    <div class="detail-value">${contract.submissionDate ? new Date(contract.submissionDate).toLocaleDateString('en-US', { month: 'long', day: 'numeric', year: 'numeric' }) : 'N/A'}</div>
                </div>
            `;
            
            if (userEmail) {
                checkPinBalance(userEmail);
            }
            
            document.getElementById('detailModal').style.display = 'flex';
            translatePage(); // Translate the modal
        }

        // ==================== LOAD HERO IMAGE ====================
        async function loadHeroImage() {
            try {
                const response = await fetch(HERO_IMAGE_API_URL);
                const result = await response.json();
                if (result.success && result.image_url) {
                    const heroImage = document.querySelector('#heroImage img');
                    if (heroImage) {
                        heroImage.src = result.image_url;
                    }
                }
            } catch (error) {
                console.error('Error loading hero image:', error);
            }
        }

        // ==================== LOAD TOP STAFF ====================
        async function loadTopStaff() {
            try {
                const response = await fetch(TOP_STAFF_API_URL);
                const result = await response.json();
                if (result.success) {
                    topStaff = result.data || [];
                    displayTopStaff();
                } else {
                    console.error('Failed to load top staff:', result.error);
                    useFallbackStaff();
                }
            } catch (error) {
                console.error('Error loading top staff:', error);
                useFallbackStaff();
            }
        }

        function useFallbackStaff() {
            topStaff = [
                { name: 'Chukwudi', position: 'Contract Staff', joined: '2 weeks ago', companyMeetings: 1, wellBehaved: 4, consistentMarketing: 7, broughtClient: 100, closedDeal: 1000, multipleDeals: 5000, totalPoints: 6112 },
                { name: 'Cynthia', position: 'Marketing Lead', joined: '1 month ago', companyMeetings: 3, wellBehaved: 5, consistentMarketing: 10, broughtClient: 200, closedDeal: 500, multipleDeals: 2500, totalPoints: 3218 },
                { name: 'Godwin', position: 'Sales Rep', joined: '3 weeks ago', companyMeetings: 2, wellBehaved: 3, consistentMarketing: 5, broughtClient: 150, closedDeal: 300, multipleDeals: 1000, totalPoints: 1460 },
                { name: 'Samuel', position: 'Team Lead', joined: '1 week ago', companyMeetings: 4, wellBehaved: 5, consistentMarketing: 8, broughtClient: 50, closedDeal: 200, multipleDeals: 500, totalPoints: 767 },
                { name: 'Obina', position: 'Junior Staff', joined: '2 days ago', companyMeetings: 1, wellBehaved: 2, consistentMarketing: 3, broughtClient: 10, closedDeal: 50, multipleDeals: 100, totalPoints: 166 }
            ];
            displayTopStaff();
        }

        function displayTopStaff() {
            const list = document.getElementById('topStaffList');
            if (!list) return;
            
            if (!topStaff || topStaff.length === 0) {
                list.innerHTML = '<div class="bid-item" data-i18n="no_staff_found">No staff found</div>';
                translatePage();
                return;
            }
            
            const top5 = topStaff.slice(0, 5);
            const staffEmojis = ['', '', '', '', ''];
            
            list.innerHTML = top5.map((staff, index) => `
                <div class="bid-item">
                    <div class="bid-info">
                        <div class="bid-avatar">${staffEmojis[index] || ''}</div>
                        <div class="bid-name">${staff.name || 'Unknown'}</div>
                    </div>
                    <button class="bid-button" onclick="viewStaffDetail(${index})" data-i18n="view">View</button>
                </div>
            `).join('');
            translatePage();
        }

        function viewStaffDetail(index) {
            const staff = topStaff[index];
            if (!staff) return;
            
            const content = document.getElementById('staffDetailContent');
            const emoji = index === 0 ? '' : index === 1 ? '' : index === 2 ? '' : index === 3 ? '' : '';
            
            content.innerHTML = `
                <div class="staff-info">
                    <div class="staff-header">
                        <div class="staff-avatar-large">${emoji}</div>
                        <div class="staff-title">
                            <h3>${staff.name || 'Unknown'}</h3>
                            <p>${staff.position || 'Staff'}  Joined ${staff.joined || 'Recently'}</p>
                        </div>
                    </div>
                    
                    <div class="staff-detail-row">
                        <span class="staff-detail-label" data-i18n="position">Position</span>
                        <span class="staff-detail-value">${staff.position || 'N/A'}</span>
                    </div>
                    
                    <div class="staff-detail-row">
                        <span class="staff-detail-label" data-i18n="joined">Joined</span>
                        <span class="staff-detail-value">${staff.joined || 'N/A'}</span>
                    </div>
                    
                    <div class="category-section">
                        <div class="category-title" data-i18n="performance_categories"> Performance Categories</div>
                        <div class="category-grid">
                            <div class="category-item">
                                <div class="category-name" data-i18n="company_meetings">Company Meetings</div>
                                <div class="category-points">${staff.companyMeetings || 0} pts</div>
                            </div>
                            <div class="category-item">
                                <div class="category-name" data-i18n="well_behaved">Well Behaved</div>
                                <div class="category-points">${staff.wellBehaved || 0} pts</div>
                            </div>
                            <div class="category-item">
                                <div class="category-name" data-i18n="consistent_marketing">Consistent Marketing</div>
                                <div class="category-points">${staff.consistentMarketing || 0} pts</div>
                            </div>
                            <div class="category-item">
                                <div class="category-name" data-i18n="brought_client">Brought Client</div>
                                <div class="category-points">${staff.broughtClient || 0} pts</div>
                            </div>
                            <div class="category-item">
                                <div class="category-name" data-i18n="closed_deal">Closed Deal</div>
                                <div class="category-points">${staff.closedDeal || 0} pts</div>
                            </div>
                            <div class="category-item">
                                <div class="category-name" data-i18n="multiple_deals">Multiple Deals</div>
                                <div class="category-points">${staff.multipleDeals || 0} pts</div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="total-points">
                        <div class="total-points-label" data-i18n="total_points">Total Points</div>
                        <div class="total-points-value">${(staff.totalPoints || 0).toLocaleString()}</div>
                    </div>
                </div>
            `;
            
            document.getElementById('staffDetailModal').style.display = 'flex';
            translatePage();
        }

        // ==================== LOAD YOUTUBE CREATORS ====================
        async function loadYouTubeCreators() {
            try {
                const response = await fetch(YOUTUBE_CREATORS_API_URL);
                const result = await response.json();
                
                if (result.success) {
                    youtubeCreators = result.data || [];
                } else {
                    console.error('Failed to load YouTube creators:', result.error);
                    youtubeCreators = [];
                }
            } catch (error) {
                console.error('Error loading YouTube creators:', error);
                youtubeCreators = [];
            }
            
            loadBanners();
        }

        function loadBanners() {
            const slider = document.getElementById('bannersSlider');
            const controls = document.getElementById('sliderControls');
            
            if (!youtubeCreators || youtubeCreators.length === 0) {
                slider.innerHTML = `
                    <div class="banner-slide">
                        <div class="youtube-banner" style="background-image: linear-gradient(rgba(0,0,0,0.7), rgba(0,0,0,0.7)), url('https://images.unsplash.com/photo-1573164713988-8665fc963095?w=1400&auto=format')">
                            <div class="banner-content">
                                <h3>K.R.O Media</h3>
                                <p data-i18n="check_back">Check back soon for featured creators</p>
                            </div>
                            <div class="banner-avatar">
                                <img src="https://images.unsplash.com/photo-1573164713988-8665fc963095?w=150&auto=format" alt="Avatar">
                            </div>
                        </div>
                    </div>
                `;
                translatePage();
                return;
            }
            
            slider.innerHTML = youtubeCreators.map((creator, index) => `
                <div class="banner-slide">
                    <div class="youtube-banner" onclick="window.open('${creator.link || '#'}', '_blank')" style="background-image: linear-gradient(90deg, rgba(0,0,0,0.7) 0%, rgba(0,0,0,0.3) 50%, rgba(0,0,0,0.1) 100%), url('${creator.image_url || 'https://images.unsplash.com/photo-1573164713988-8665fc963095?w=1400&auto=format'}')">
                        <div class="banner-content">
                            <h3>${creator.name || 'Creator'}</h3>
                            <p>${creator.description || 'YouTube Creator'}</p>
                            ${creator.subscribers ? `
                            <div class="banner-stats">
                                <div class="stat">
                                    <div class="stat-number">${creator.subscribers}</div>
                                    <div class="stat-label" data-i18n="subscribers">Subscribers</div>
                                </div>
                            </div>
                            ` : ''}
                            <button class="banner-button" onclick="event.stopPropagation(); window.open('${creator.link || '#'}', '_blank')" data-i18n="watch_now">Watch Now </button>
                        </div>
                        <div class="banner-avatar">
                            <img src="${creator.avatar_url || 'https://images.unsplash.com/photo-1573164713988-8665fc963095?w=150&auto=format'}" alt="${creator.name || 'Creator'}">
                        </div>
                    </div>
                </div>
            `).join('');
            
            controls.innerHTML = youtubeCreators.map((_, index) => `
                <div class="slider-dot ${index === 0 ? 'active' : ''}" onclick="goToBanner(${index})"></div>
            `).join('');
            
            currentBannerIndex = 0;
            updateBannerPosition();
            startBannerSlide();
            translatePage();
        }

        function startBannerSlide() {
            if (bannerInterval) clearInterval(bannerInterval);
            bannerInterval = setInterval(() => {
                if (youtubeCreators.length > 0) {
                    currentBannerIndex = (currentBannerIndex + 1) % youtubeCreators.length;
                    updateBannerPosition();
                }
            }, 5000);
        }

        function goToBanner(index) {
            currentBannerIndex = index;
            updateBannerPosition();
            clearInterval(bannerInterval);
            startBannerSlide();
        }

        function updateBannerPosition() {
            const slider = document.getElementById('bannersSlider');
            if (slider) {
                slider.style.transform = `translateX(-${currentBannerIndex * 100}%)`;
            }
            
            document.querySelectorAll('.slider-dot').forEach((dot, index) => {
                if (index === currentBannerIndex) {
                    dot.classList.add('active');
                } else {
                    dot.classList.remove('active');
                }
            });
        }

        // ==================== IMAGE UPLOAD HANDLERS ====================
        function handleImageSelect(event) {
            const file = event.target.files[0];
            if (file) {
                if (file.size > 5 * 1024 * 1024) {
                    showToast(translations[currentLanguage]?.image_too_large || 'Image must be less than 5MB', 'error');
                    return;
                }
                selectedImageFile = file;
                previewImage(file);
            }
        }

        function handleDragOver(event) {
            event.preventDefault();
            document.getElementById('imageUploadContainer').classList.add('dragover');
        }

        function handleDragLeave(event) {
            event.preventDefault();
            document.getElementById('imageUploadContainer').classList.remove('dragover');
        }

        function handleDrop(event) {
            event.preventDefault();
            document.getElementById('imageUploadContainer').classList.remove('dragover');
            
            const file = event.dataTransfer.files[0];
            if (file && file.type.startsWith('image/')) {
                if (file.size > 5 * 1024 * 1024) {
                    showToast(translations[currentLanguage]?.image_too_large || 'Image must be less than 5MB', 'error');
                    return;
                }
                selectedImageFile = file;
                previewImage(file);
            } else {
                showToast(translations[currentLanguage]?.please_drop_image || 'Please drop an image file', 'error');
            }
        }

        function previewImage(file) {
            const reader = new FileReader();
            reader.onload = function(e) {
                const preview = document.getElementById('imagePreview');
                const img = preview.querySelector('img');
                if (img) {
                    img.src = e.target.result;
                    preview.style.display = 'block';
                }
            };
            reader.readAsDataURL(file);
        }

        async function uploadToImgbb(file) {
            const formData = new FormData();
            formData.append('image', file);
            formData.append('key', IMGBB_API_KEY);
            
            try {
                const response = await fetch('https://api.imgbb.com/1/upload', {
                    method: 'POST',
                    body: formData
                });
                
                const data = await response.json();
                if (data.success) {
                    return data.data.url;
                } else {
                    throw new Error('Upload failed');
                }
            } catch (error) {
                console.error('ImgBB upload error:', error);
                return null;
            }
        }

        // ==================== LOAD CONTRACTS ====================
        async function loadContracts() {
            try {
                const response = await fetch(GOOGLE_SHEETS_API_URL);
                const result = await response.json();
                
                if (result.success) {
                    contracts = result.data || [];
                    contracts.sort((a, b) => new Date(b.submissionDate || 0) - new Date(a.submissionDate || 0));
                    saveToStorage();
                    updateDisplay();
                } else {
                    console.error('API Error:', result.error);
                    loadFromStorage();
                }
            } catch (error) {
                console.error('Failed to load from Google Sheets:', error);
                loadFromStorage();
            }
        }

        // ==================== UPDATE DISPLAY ====================
        function updateDisplay() {
            displayContracts();
            displayProgress();
            updateStats();
            updateTopContracts();
        }

        function displayContracts() {
            const filtered = filterContracts(contracts);
            const grid = document.getElementById('contractsGrid');
            
            if (!grid) return;
            
            if (filtered.length === 0) {
                grid.innerHTML = '<div style="grid-column: 1/-1; text-align: center; padding: 50px; color: #666;" data-i18n="no_contracts_found">No contracts found</div>';
                translatePage();
                return;
            }
            
            const displayContracts = filtered.slice(0, MAX_HOMEPAGE_CONTRACTS);
            
            grid.innerHTML = displayContracts.map(contract => `
                <div class="contract-card" data-status="${contract.status || 'Not Started'}" onclick="viewContract(${contract.id})">
                    <div class="contract-image">
                        <img src="${contract.image_url || 'https://via.placeholder.com/400x200/1a1a1a/ff3b9c?text=No+Image'}" alt="${contract.title || 'Contract'}" loading="lazy" onerror="this.src='https://via.placeholder.com/400x200/1a1a1a/ff3b9c?text=No+Image'">
                    </div>
                    <div class="contract-content">
                        <div class="contract-amount">${contract.amount ? parseFloat(contract.amount).toLocaleString() : '0'}</div>
                        <div class="contract-title">${contract.title || 'Untitled'}</div>
                        <div class="contract-company">${translations[currentLanguage]?.at || 'at'} ${contract.company || 'Unknown'}</div>
                        ${contract.country ? `
                        <div class="contract-location">
                            <span></span> ${contract.country} ${contract.city ? ' ' + contract.city : ''}
                        </div>
                        ` : ''}
                        <div class="contract-meta">
                            <span class="status-badge ${contract.status ? contract.status.toLowerCase().replace(' ', '-') : 'not-started'}">${contract.status || translations[currentLanguage]?.not_started || 'Not Started'}</span>
                            <span class="contract-date"> ${contract.submissionDate ? new Date(contract.submissionDate).toLocaleDateString() : translations[currentLanguage]?.no_date || 'No date'}</span>
                        </div>
                    </div>
                </div>
            `).join('');
            translatePage();
        }

        function displayProgress() {
            const filtered = filterContracts(contracts);
            const list = document.getElementById('progressList');
            
            if (!list) return;
            
            if (filtered.length === 0) {
                list.innerHTML = '<div style="text-align: center; padding: 50px; color: #666;" data-i18n="no_contracts_found">No contracts found</div>';
                translatePage();
                return;
            }
            
            list.innerHTML = filtered.map(contract => `
                <div class="progress-item" onclick="viewContract(${contract.id})">
                    <div class="progress-status ${contract.status ? contract.status.toLowerCase().replace(' ', '-') : 'not-started'}"></div>
                    <div class="progress-content">
                        <div class="progress-title">
                            <span>${(contract.status || translations[currentLanguage]?.not_started || 'NOT STARTED').toUpperCase()}</span>  ${contract.title || 'Untitled'}
                        </div>
                        ${contract.country ? `
                        <div class="progress-location">
                             ${contract.country} ${contract.city ? ' ' + contract.city : ''}
                        </div>
                        ` : ''}
                        <div class="progress-date">${translations[currentLanguage]?.posted || 'Posted'} on ${contract.submissionDate ? new Date(contract.submissionDate).toLocaleDateString('en-US', { month: 'long', day: 'numeric', year: 'numeric' }) : translations[currentLanguage]?.unknown_date || 'Unknown date'}</div>
                    </div>
                </div>
            `).join('');
            translatePage();
        }

        function updateStats() {
            const activeUsers = new Set(contracts.map(c => c.workerId)).size;
            const completed = contracts.filter(c => c.status === 'Completed').length;
            const total = contracts.reduce((sum, c) => sum + parseFloat(c.amount || 0), 0);
            
            const activeUsersEl = document.getElementById('activeUsers');
            const completedContractsEl = document.getElementById('completedContracts');
            const totalSupportEl = document.getElementById('totalSupport');
            
            if (activeUsersEl) activeUsersEl.textContent = activeUsers || '1,609';
            if (completedContractsEl) completedContractsEl.textContent = completed || '247';
            if (totalSupportEl) totalSupportEl.textContent = `${(total / 1000).toFixed(1)}K`;
            
            if (contracts.length > 0) {
                const highest = [...contracts].sort((a, b) => parseFloat(b.amount || 0) - parseFloat(a.amount || 0))[0];
                const todayHighestEl = document.getElementById('todayHighest');
                if (todayHighestEl) {
                    todayHighestEl.innerHTML = `${highest.amount ? parseFloat(highest.amount).toLocaleString() : '0'} ${translations[currentLanguage]?.by || 'by'} ${highest.company || 'Unknown'}`;
                }
            }
        }

        function updateTopContracts() {
            const topContracts = [...contracts]
                .sort((a, b) => parseFloat(b.amount || 0) - parseFloat(a.amount || 0))
                .slice(0, 5);
            
            const container = document.getElementById('topContractsList');
            
            if (!container) return;
            
            if (topContracts.length === 0) {
                container.innerHTML = '<div class="bid-item" data-i18n="no_contracts_found">No contracts found</div>';
                translatePage();
                return;
            }
            
            container.innerHTML = topContracts.map((contract, index) => `
                <div class="bid-item">
                    <div class="bid-info">
                        <div class="bid-avatar">${index === 0 ? '' : index === 1 ? '' : index === 2 ? '' : ''}</div>
                        <div>
                            <div class="bid-name">${contract.title || 'Untitled'}</div>
                            <div class="bid-amount">${contract.amount ? parseFloat(contract.amount).toLocaleString() : '0'}</div>
                            ${contract.country ? `<div style="font-size: 0.8em; color: #a4ff7c;"> ${contract.country}</div>` : ''}
                        </div>
                    </div>
                    <button class="bid-button" onclick="viewContract(${contract.id})" data-i18n="view">View</button>
                </div>
            `).join('');
            translatePage();
        }

        // ==================== LOCAL STORAGE ====================
        function saveToStorage() {
            localStorage.setItem('kro_contracts', JSON.stringify(contracts));
        }

        function loadFromStorage() {
            const saved = localStorage.getItem('kro_contracts');
            if (saved) {
                try {
                    contracts = JSON.parse(saved);
                    contracts.sort((a, b) => new Date(b.submissionDate || 0) - new Date(a.submissionDate || 0));
                    updateDisplay();
                } catch (e) {
                    console.error('Error loading from storage:', e);
                }
            }
        }

        // ==================== FILTER FUNCTIONS ====================
        function filterContracts(contractsList) {
            let filtered = contractsList;
            
            // Apply status filter
            if (currentFilter !== 'all') {
                filtered = filtered.filter(c => c.status === currentFilter);
            }
            
            // Apply country filter
            if (currentCountryFilter) {
                filtered = filtered.filter(c => c.country === currentCountryFilter);
            }
            
            // Apply city filter
            if (currentCityFilter) {
                filtered = filtered.filter(c => c.city === currentCityFilter);
            }
            
            return filtered;
        }

        function selectFilter(status) {
            currentFilter = status;
            document.querySelectorAll('.filter-option').forEach(opt => opt.classList.remove('selected'));
            const filterId = status === 'all' ? 'filterAll' : `filter${status.replace(' ', '')}`;
            const filterEl = document.getElementById(filterId);
            if (filterEl) filterEl.classList.add('selected');
        }

        function applyFilter() {
            closeFilterModal();
            displayContracts();
            displayProgress();
        }

        function clearFilter() {
            currentFilter = 'all';
            document.querySelectorAll('.filter-option').forEach(opt => opt.classList.remove('selected'));
            const filterAll = document.getElementById('filterAll');
            if (filterAll) filterAll.classList.add('selected');
            displayContracts();
            displayProgress();
        }

        // ==================== SEARCH FUNCTION ====================
        function searchContracts() {
            const searchTerm = document.getElementById('searchInput').value.toLowerCase();
            
            if (searchTerm === '') {
                displayContracts();
                return;
            }
            
            const filtered = contracts.filter(c => 
                (c.title || '').toLowerCase().includes(searchTerm) || 
                (c.company || '').toLowerCase().includes(searchTerm) ||
                (c.description || '').toLowerCase().includes(searchTerm) ||
                (c.country || '').toLowerCase().includes(searchTerm) ||
                (c.city || '').toLowerCase().includes(searchTerm)
            );
            
            if (currentPage === 'home') {
                const grid = document.getElementById('contractsGrid');
                if (!grid) return;
                
                if (filtered.length === 0) {
                    grid.innerHTML = '<div style="grid-column: 1/-1; text-align: center; padding: 50px; color: #666;" data-i18n="no_contracts_found">No contracts found</div>';
                    translatePage();
                } else {
                    const displayContracts = filtered.slice(0, MAX_HOMEPAGE_CONTRACTS);
                    grid.innerHTML = displayContracts.map(contract => `
                        <div class="contract-card" data-status="${contract.status || 'Not Started'}" onclick="viewContract(${contract.id})">
                            <div class="contract-image">
                                <img src="${contract.image_url || 'https://via.placeholder.com/400x200/1a1a1a/ff3b9c?text=No+Image'}" alt="${contract.title || 'Contract'}" loading="lazy" onerror="this.src='https://via.placeholder.com/400x200/1a1a1a/ff3b9c?text=No+Image'">
                            </div>
                            <div class="contract-content">
                                <div class="contract-amount">${contract.amount ? parseFloat(contract.amount).toLocaleString() : '0'}</div>
                                <div class="contract-title">${contract.title || 'Untitled'}</div>
                                <div class="contract-company">${translations[currentLanguage]?.at || 'at'} ${contract.company || 'Unknown'}</div>
                                ${contract.country ? `
                                <div class="contract-location">
                                    <span></span> ${contract.country} ${contract.city ? ' ' + contract.city : ''}
                                </div>
                                ` : ''}
                                <div class="contract-meta">
                                    <span class="status-badge ${contract.status ? contract.status.toLowerCase().replace(' ', '-') : 'not-started'}">${contract.status || translations[currentLanguage]?.not_started || 'Not Started'}</span>
                                    <span class="contract-date"> ${contract.submissionDate ? new Date(contract.submissionDate).toLocaleDateString() : translations[currentLanguage]?.no_date || 'No date'}</span>
                                </div>
                            </div>
                        </div>
                    `).join('');
                    translatePage();
                }
            }
        }

        // ==================== ALL CONTRACTS MODAL ====================
        function openAllContractsModal() {
            displayAllContracts();
            document.getElementById('allContractsModal').style.display = 'flex';
            translatePage();
        }

        function closeAllContractsModal() {
            document.getElementById('allContractsModal').style.display = 'none';
        }

        function displayAllContracts() {
            const container = document.getElementById('allContractsList');
            
            if (!container) return;
            
            if (contracts.length === 0) {
                container.innerHTML = '<div style="text-align: center; padding: 30px; color: #666;" data-i18n="no_contracts_found">No contracts found</div>';
                translatePage();
                return;
            }
            
            container.innerHTML = contracts.map(contract => `
                <div class="contract-list-item">
                    <div class="list-item-image">
                        <img src="${contract.image_url || 'https://via.placeholder.com/60x60/1a1a1a/ff3b9c?text=No+Image'}" alt="${contract.title || 'Contract'}" loading="lazy" onerror="this.src='https://via.placeholder.com/60x60/1a1a1a/ff3b9c?text=No+Image'">
                    </div>
                    <div class="list-item-content">
                        <div class="list-item-title">${contract.title || 'Untitled'}</div>
                        <div class="list-item-details">
                            <span class="list-item-amount">${contract.amount ? parseFloat(contract.amount).toLocaleString() : '0'}</span>
                            <span class="list-item-status ${contract.status ? contract.status.toLowerCase().replace(' ', '-') : 'not-started'}">${contract.status || translations[currentLanguage]?.not_started || 'Not Started'}</span>
                        </div>
                        ${contract.country ? `<div style="font-size: 0.8em; color: #a4ff7c;"> ${contract.country} ${contract.city || ''}</div>` : ''}
                    </div>
                    <button class="list-item-button" onclick="viewContractFromList(${contract.id})" data-i18n="view">View</button>
                </div>
            `).join('');
            translatePage();
        }

        function viewContractFromList(id) {
            closeAllContractsModal();
            viewContract(id);
        }

        // ==================== PAGE NAVIGATION ====================
        function showPage(page) {
            currentPage = page;
            
            // Update desktop nav buttons
            document.querySelectorAll('.nav-btn').forEach(btn => btn.classList.remove('active'));
            if (page === 'home') {
                document.querySelectorAll('.nav-btn')[0].classList.add('active');
            } else {
                document.querySelectorAll('.nav-btn')[1].classList.add('active');
            }
            
            const homePage = document.getElementById('homePage');
            const progressPage = document.getElementById('progressPage');
            
            if (page === 'home') {
                if (homePage) homePage.style.display = 'block';
                if (progressPage) progressPage.style.display = 'none';
            } else {
                if (homePage) homePage.style.display = 'none';
                if (progressPage) progressPage.style.display = 'block';
            }
        }

        // ==================== MODAL FUNCTIONS ====================
        function openFilterModal() {
            document.getElementById('filterModal').style.display = 'flex';
            translatePage();
        }

        function closeFilterModal() {
            document.getElementById('filterModal').style.display = 'none';
        }

        function openAddModal() {
            document.getElementById('addModal').style.display = 'flex';
            const today = new Date().toISOString().split('T')[0];
            document.getElementById('submissionDate').value = today;
            translatePage();
        }

        function closeAddModal() {
            document.getElementById('addModal').style.display = 'none';
            document.getElementById('addContractForm').reset();
            document.getElementById('imagePreview').style.display = 'none';
            document.getElementById('formMessage').innerHTML = '';
            selectedImageFile = null;
        }

        function closeDetailModal() {
            document.getElementById('detailModal').style.display = 'none';
        }

        function closeStaffDetailModal() {
            document.getElementById('staffDetailModal').style.display = 'none';
        }

        // ==================== INITIAL LOAD ====================
        window.onload = function() {
            loadYouTubeCreators();
            loadTopStaff();
            loadContracts();
            loadHeroImage();
            
            if (userEmail) {
                checkPinBalance(userEmail);
            }
            
            // Set default date in add modal if open
            const today = new Date().toISOString().split('T')[0];
            const dateInput = document.getElementById('submissionDate');
            if (dateInput) dateInput.value = today;
            
            // Initialize language
            changeLanguage(currentLanguage);
            
            // Initialize category filter listeners
            document.getElementById('countryFilter')?.addEventListener('change', populateCityDropdown);
            
            // Start the live clock
            startLiveClock();
        };

        // Close modals when clicking outside
        window.onclick = function(event) {
            const modals = ['filterModal', 'addModal', 'detailModal', 'staffDetailModal', 'allContractsModal', 'contactModal', 'buyPinsModal', 'freePinModal', 'categoryModal'];
            modals.forEach(modalId => {
                const modal = document.getElementById(modalId);
                if (event.target === modal) {
                    if (modalId === 'freePinModal') {
                        closeFreePinModal();
                    } else {
                        modal.style.display = 'none';
                    }
                }
            });
            
            // Close mobile action dropdown if clicking outside
            const actionButtons = document.getElementById('mobileActionButtons');
            const actionToggle = document.querySelector('.mobile-action-toggle');
            if (actionButtons && actionButtons.classList.contains('show') && 
                !actionToggle?.contains(event.target) && !actionButtons.contains(event.target)) {
                actionButtons.classList.remove('show');
                document.getElementById('mobileActionArrow').classList.remove('open');
            }
        };
    </script>
</body>
</html>